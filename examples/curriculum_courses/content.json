{
  "courses": [
    {
      "source_id": "hummingbird-biology",
      "title": "Hummingbird Biology",
      "description": "Learn about the fascinating biology of hummingbirds",
      "units": [
        {
          "source_id": "hb-anatomy-physiology",
          "title": "Anatomy & Physiology",
          "description": "Explore the unique anatomical features of hummingbirds",
          "learning_objectives": [
            "Identify the key bones in a hummingbird skeleton",
            "Explain how skeletal adaptations enable hovering flight",
            "Describe the major muscle groups used in flight",
            "Explain the role of fast-twitch muscles in wing movement",
            "Describe how the respiratory system supports high metabolism",
            "Explain the function of air sacs in hummingbird respiration"
          ],
          "lessons": [
            {
              "source_id": "hb-skeletal-structure",
              "title": "Skeletal Structure",
              "learning_objective_indices": [0, 1],
              "content": "<p>Hummingbirds possess one of nature's most remarkable skeletal systems, evolved over millions of years to support their unique flight capabilities. Unlike most birds, whose skeletons account for about 5% of body weight, hummingbird bones are extraordinarily lightweight while maintaining exceptional strength.</p><svg viewBox=\"0 0 400 280\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"280\" rx=\"8\"/><text x=\"200\" y=\"25\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"#333\">Hummingbird Skeletal Adaptations</text><ellipse cx=\"200\" cy=\"100\" rx=\"60\" ry=\"35\" fill=\"none\" stroke=\"#6c5ce7\" stroke-width=\"2\"/><text x=\"200\" y=\"105\" text-anchor=\"middle\" font-size=\"10\" fill=\"#6c5ce7\">Enlarged Keel</text><circle cx=\"200\" cy=\"60\" r=\"15\" fill=\"none\" stroke=\"#00b894\" stroke-width=\"2\"/><text x=\"200\" y=\"63\" text-anchor=\"middle\" font-size=\"8\" fill=\"#00b894\">Skull</text><line x1=\"140\" y1=\"85\" x2=\"80\" y2=\"70\" stroke=\"#e17055\" stroke-width=\"3\"/><circle cx=\"140\" cy=\"85\" r=\"6\" fill=\"#e17055\"/><text x=\"60\" y=\"65\" font-size=\"9\" fill=\"#e17055\">Ball-Socket</text><text x=\"60\" y=\"75\" font-size=\"9\" fill=\"#e17055\">Shoulder</text><line x1=\"260\" y1=\"85\" x2=\"320\" y2=\"70\" stroke=\"#e17055\" stroke-width=\"3\"/><circle cx=\"260\" cy=\"85\" r=\"6\" fill=\"#e17055\"/><rect x=\"170\" y=\"130\" width=\"60\" height=\"8\" fill=\"#0984e3\" rx=\"2\"/><rect x=\"170\" y=\"142\" width=\"60\" height=\"8\" fill=\"#0984e3\" rx=\"2\"/><rect x=\"170\" y=\"154\" width=\"60\" height=\"8\" fill=\"#0984e3\" rx=\"2\"/><text x=\"200\" y=\"180\" text-anchor=\"middle\" font-size=\"9\" fill=\"#0984e3\">Fused Vertebrae</text><line x1=\"175\" y1=\"200\" x2=\"165\" y2=\"240\" stroke=\"#636e72\" stroke-width=\"2\"/><line x1=\"225\" y1=\"200\" x2=\"235\" y2=\"240\" stroke=\"#636e72\" stroke-width=\"2\"/><text x=\"200\" y=\"260\" text-anchor=\"middle\" font-size=\"9\" fill=\"#636e72\">Reduced Leg Bones</text></svg><h2>Bone Structure</h2><p>The secret lies in their pneumatized bones - hollow structures reinforced with internal struts, similar to the engineering principles used in aircraft wings. This honeycomb-like internal architecture reduces weight by up to 50% compared to solid bone while retaining structural integrity.</p><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> A Ruby-throated Hummingbird's entire skeleton weighs less than a paperclip - about 0.9 grams! Yet these delicate bones withstand G-forces that would shatter human bones.</div><h2>Key Skeletal Features</h2><p>The hummingbird skeleton includes several specialized adaptations:</p><ul><li><strong>Fused vertebrae:</strong> Several neck and back vertebrae are fused together, creating a rigid backbone that provides stability during the rapid wing movements of hovering flight.</li><li><strong>Enlarged keel bone:</strong> The sternum features a dramatically enlarged keel that extends down from the chest. This massive anchor point provides attachment for the powerful flight muscles that make up nearly 30% of body weight.</li><li><strong>Ball-and-socket shoulder joints:</strong> Perhaps the most crucial adaptation, these specialized joints allow the wings to rotate a full 180 degrees, enabling the unique figure-8 wing pattern essential for hovering.</li><li><strong>Reduced leg bones:</strong> Since hummingbirds spend most of their lives in flight, their leg bones are minimal - strong enough for perching but lightweight enough not to impede flight.</li></ul><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Species Spotlight: Bee Hummingbird</strong><br/>The world's smallest bird, Cuba's Bee Hummingbird (Mellisuga helenae), has a skeleton so tiny that its entire body mass is just 1.6-2 grams - lighter than a US penny. Its femur (thigh bone) is about 5mm long, yet perfectly formed for perching.</div><h2>Evolutionary Significance</h2><p>These skeletal adaptations represent millions of years of evolutionary refinement. Each feature works in concert with the others: the fused vertebrae wouldn't be useful without the flexible shoulders, and the enlarged keel would be unnecessary without the powerful muscles it supports.</p><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Human Comparison:</strong> If humans had proportionally sized keels like hummingbirds, our breastbones would extend outward about 30 cm (1 foot) from our chests! This would be necessary to anchor flight muscles weighing over 40 pounds on each side.</div>",
              "exercise_questions": [
                {
                  "type": "single_select",
                  "id": "hb-skel-q1",
                  "question": "A biologist discovers a new bird species with solid, dense bones. Based on what you learned about hummingbird skeletal adaptations, what flight behavior would this bird likely be UNABLE to perform?",
                  "correct_answer": "Sustained hovering in place",
                  "all_answers": ["Sustained hovering in place", "Perching on branches", "Walking on the ground", "Sleeping while perched"]
                },
                {
                  "type": "multiple_select",
                  "id": "hb-skel-q2",
                  "question": "An engineer is designing a micro-drone inspired by hummingbirds. Which skeletal features should they incorporate into their design for hovering capability?",
                  "correct_answers": ["A rigid central frame like fused vertebrae", "Rotating joints allowing 180-degree wing rotation"],
                  "all_answers": ["A rigid central frame like fused vertebrae", "Rotating joints allowing 180-degree wing rotation", "Heavy landing gear for stability", "Flexible backbone for extra maneuverability"]
                },
                {
                  "type": "single_select",
                  "id": "hb-skel-q3",
                  "question": "A Bee Hummingbird weighing 2 grams has flight muscles comprising 30% of its body weight. If its keel bone were reduced to the size of a typical songbird's (proportionally), what problem would the hummingbird face?",
                  "correct_answer": "Insufficient anchor points for powerful flight muscles",
                  "all_answers": ["Insufficient anchor points for powerful flight muscles", "Inability to digest nectar", "Loss of body temperature regulation", "Reduced vision capabilities"]
                }
              ]
            },
            {
              "source_id": "hb-muscle-systems",
              "title": "Muscle Systems",
              "learning_objective_indices": [2, 3],
              "content": "<p>The muscular system of hummingbirds is a marvel of biological engineering, representing the most extreme adaptation for sustained powered flight in the animal kingdom. These tiny birds possess muscles that can contract and relax at frequencies that would cause fatigue within seconds in other animals.</p><svg viewBox=\"0 0 400 300\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"300\" rx=\"8\"/><text x=\"200\" y=\"25\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"#333\">Muscle Pulley System</text><ellipse cx=\"200\" cy=\"120\" rx=\"50\" ry=\"30\" fill=\"#ffb6c1\" stroke=\"#c0392b\" stroke-width=\"2\"/><text x=\"200\" y=\"125\" text-anchor=\"middle\" font-size=\"10\" fill=\"#c0392b\">Pectoralis Major</text><text x=\"200\" y=\"137\" text-anchor=\"middle\" font-size=\"8\" fill=\"#c0392b\">(Downstroke)</text><ellipse cx=\"200\" cy=\"175\" rx=\"35\" ry=\"20\" fill=\"#98d8c8\" stroke=\"#16a085\" stroke-width=\"2\"/><text x=\"200\" y=\"178\" text-anchor=\"middle\" font-size=\"9\" fill=\"#16a085\">Supracoracoideus</text><text x=\"200\" y=\"188\" text-anchor=\"middle\" font-size=\"7\" fill=\"#16a085\">(Upstroke)</text><circle cx=\"200\" cy=\"80\" r=\"8\" fill=\"#3498db\"/><text x=\"200\" y=\"70\" text-anchor=\"middle\" font-size=\"8\" fill=\"#3498db\">Triosseal Canal</text><text x=\"200\" y=\"60\" text-anchor=\"middle\" font-size=\"7\" fill=\"#3498db\">(Pulley Point)</text><path d=\"M200,175 L200,88 L170,95\" fill=\"none\" stroke=\"#e67e22\" stroke-width=\"2\" stroke-dasharray=\"4,2\"/><text x=\"155\" y=\"100\" font-size=\"8\" fill=\"#e67e22\">Tendon</text><line x1=\"170\" y1=\"95\" x2=\"120\" y2=\"80\" stroke=\"#9b59b6\" stroke-width=\"3\"/><line x1=\"230\" y1=\"95\" x2=\"280\" y2=\"80\" stroke=\"#9b59b6\" stroke-width=\"3\"/><text x=\"100\" y=\"75\" font-size=\"9\" fill=\"#9b59b6\">Wing</text><text x=\"285\" y=\"75\" font-size=\"9\" fill=\"#9b59b6\">Wing</text><text x=\"200\" y=\"230\" text-anchor=\"middle\" font-size=\"10\" fill=\"#333\">The tendon acts like a rope through a pulley,</text><text x=\"200\" y=\"245\" text-anchor=\"middle\" font-size=\"10\" fill=\"#333\">allowing the lower muscle to lift the wing</text><rect x=\"30\" y=\"260\" width=\"80\" height=\"25\" fill=\"#ffb6c1\" stroke=\"#c0392b\"/><text x=\"70\" y=\"277\" text-anchor=\"middle\" font-size=\"8\">25-30% body wt</text><rect x=\"160\" y=\"260\" width=\"80\" height=\"25\" fill=\"#98d8c8\" stroke=\"#16a085\"/><text x=\"200\" y=\"277\" text-anchor=\"middle\" font-size=\"8\">~10% body wt</text><rect x=\"290\" y=\"260\" width=\"80\" height=\"25\" fill=\"#bdc3c7\" stroke=\"#7f8c8d\"/><text x=\"330\" y=\"277\" text-anchor=\"middle\" font-size=\"8\">Other: ~60%</text></svg><h2>Flight Muscle Composition</h2><p>Hummingbird flight muscles comprise an astounding 25-30% of total body weight - the highest proportion of any bird species. By comparison, human leg muscles (our primary locomotion muscles) make up only about 20% of body weight. This massive investment in flight capability comes at the cost of leg strength; hummingbirds can barely walk and instead shuffle sideways on their perches.</p><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> The supracoracoideus pulley system is unique to birds with powered flight. It's so efficient that hummingbird muscles can contract and relax completely in just 0.01 seconds - that's 100 times per second!</div><h2>The Two Primary Flight Muscles</h2><p>Two muscles dominate the hummingbird's flight system:</p><ul><li><strong>Pectoralis major:</strong> This large breast muscle powers the downstroke, pulling the wing downward with tremendous force. In most birds, the downstroke provides the majority of lift, but in hummingbirds, it contributes only about 50%.</li><li><strong>Supracoracoideus:</strong> This smaller muscle powers the upstroke through an ingenious pulley system. A tendon from this muscle passes through a hole in the shoulder (the triosseal canal) to attach to the top of the wing bone, allowing it to pull the wing upward - essentially working like a rope through a pulley.</li></ul><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Species Spotlight: Anna's Hummingbird</strong><br/>The Anna's Hummingbird (Calypte anna) of western North America has been clocked with wing beats up to 80 times per second during normal hovering. During courtship dives, males reach speeds of 385 body lengths per second - the highest length-specific velocity of any vertebrate!</div><h2>Fast-Twitch Fiber Dominance</h2><p>What makes hummingbird muscles truly extraordinary is their composition. They are composed almost entirely of fast-twitch muscle fibers - the same type that powers a sprinter's explosive speed. However, unlike in humans where fast-twitch fibers fatigue quickly, hummingbird fast-twitch muscles have been modified to resist fatigue through:</p><ul><li>Extremely high mitochondria density (the cellular powerhouses)</li><li>Rich capillary networks delivering oxygen</li><li>Elevated myoglobin levels storing oxygen within the muscle</li></ul><p>This allows wing beats of 50-80 times per second in normal flight, and up to 200 beats per second during courtship dives - frequencies that would instantly fatigue any other vertebrate muscle.</p><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Human Comparison:</strong> If a human sprinter's muscles worked like hummingbird muscles, they could sprint at full speed continuously for hours without tiring. Our fast-twitch fibers deplete their energy in about 10-15 seconds, while hummingbird fast-twitch fibers can work indefinitely thanks to their enhanced oxygen delivery system.</div>",
              "exercise_questions": [
                {
                  "type": "single_select",
                  "id": "hb-musc-q1",
                  "question": "A researcher is studying a 4-gram hummingbird. If they weigh just the flight muscles, approximately what mass should they expect?",
                  "correct_answer": "1.0-1.2 grams (25-30% of body weight)",
                  "all_answers": ["0.2-0.4 grams (5-10%)", "0.6-0.8 grams (15-20%)", "1.0-1.2 grams (25-30% of body weight)", "1.6-2.0 grams (40-50%)"]
                },
                {
                  "type": "single_select",
                  "id": "hb-musc-q2",
                  "question": "A veterinarian examining an injured hummingbird notices damage to the tendon passing through the triosseal canal. Which flight motion would be most affected?",
                  "correct_answer": "The upstroke (wing lifting)",
                  "all_answers": ["The downstroke (wing pushing down)", "The upstroke (wing lifting)", "Forward flight only", "Perching ability"]
                },
                {
                  "type": "single_select",
                  "id": "hb-musc-q3",
                  "question": "Scientists want to create artificial muscles for a hovering drone. Which cellular feature of hummingbird muscles would be MOST critical to replicate?",
                  "correct_answer": "High mitochondria density for continuous energy",
                  "all_answers": ["Large cell size for more power", "High mitochondria density for continuous energy", "Low oxygen requirements", "Slow contraction speed"]
                }
              ]
            },
            {
              "source_id": "hb-respiratory-system",
              "title": "Respiratory System",
              "learning_objective_indices": [4, 5],
              "content": "<p>To power their extraordinary metabolism, hummingbirds have evolved the most efficient respiratory system of any vertebrate. Their oxygen demands during flight are so extreme that a conventional bird respiratory system would be completely inadequate.</p><svg viewBox=\"0 0 400 320\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"320\" rx=\"8\"/><text x=\"200\" y=\"25\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"#333\">Air Sac System &amp; Unidirectional Flow</text><ellipse cx=\"200\" cy=\"100\" rx=\"30\" ry=\"20\" fill=\"#ffcdd2\" stroke=\"#c62828\" stroke-width=\"2\"/><text x=\"200\" y=\"105\" text-anchor=\"middle\" font-size=\"9\" fill=\"#c62828\">Lungs</text><ellipse cx=\"120\" cy=\"70\" rx=\"25\" ry=\"15\" fill=\"#bbdefb\" stroke=\"#1565c0\" stroke-width=\"1.5\"/><ellipse cx=\"280\" cy=\"70\" rx=\"25\" ry=\"15\" fill=\"#bbdefb\" stroke=\"#1565c0\" stroke-width=\"1.5\"/><ellipse cx=\"100\" cy=\"130\" rx=\"20\" ry=\"12\" fill=\"#c8e6c9\" stroke=\"#2e7d32\" stroke-width=\"1.5\"/><ellipse cx=\"300\" cy=\"130\" rx=\"20\" ry=\"12\" fill=\"#c8e6c9\" stroke=\"#2e7d32\" stroke-width=\"1.5\"/><ellipse cx=\"140\" cy=\"160\" rx=\"18\" ry=\"10\" fill=\"#fff9c4\" stroke=\"#f9a825\" stroke-width=\"1.5\"/><ellipse cx=\"260\" cy=\"160\" rx=\"18\" ry=\"10\" fill=\"#fff9c4\" stroke=\"#f9a825\" stroke-width=\"1.5\"/><ellipse cx=\"200\" cy=\"180\" rx=\"22\" ry=\"12\" fill=\"#e1bee7\" stroke=\"#7b1fa2\" stroke-width=\"1.5\"/><text x=\"200\" y=\"210\" text-anchor=\"middle\" font-size=\"8\" fill=\"#555\">9 Air Sacs distributed throughout body</text><path d=\"M50,100 L95,85 L145,70 L170,100\" fill=\"none\" stroke=\"#4caf50\" stroke-width=\"2\" marker-end=\"url(#arrowG)\"/><path d=\"M170,100 L200,100 L230,100\" fill=\"none\" stroke=\"#4caf50\" stroke-width=\"2\" marker-end=\"url(#arrowG)\"/><path d=\"M230,100 L255,70 L305,85 L350,100\" fill=\"none\" stroke=\"#f44336\" stroke-width=\"2\" marker-end=\"url(#arrowR)\"/><defs><marker id=\"arrowG\" markerWidth=\"6\" markerHeight=\"6\" refX=\"5\" refY=\"3\" orient=\"auto\"><path d=\"M0,0 L6,3 L0,6 Z\" fill=\"#4caf50\"/></marker><marker id=\"arrowR\" markerWidth=\"6\" markerHeight=\"6\" refX=\"5\" refY=\"3\" orient=\"auto\"><path d=\"M0,0 L6,3 L0,6 Z\" fill=\"#f44336\"/></marker></defs><text x=\"80\" y=\"250\" font-size=\"10\" fill=\"#4caf50\">● Fresh air IN</text><text x=\"80\" y=\"265\" font-size=\"9\" fill=\"#555\">(through posterior sacs)</text><text x=\"220\" y=\"250\" font-size=\"10\" fill=\"#f44336\">● Used air OUT</text><text x=\"220\" y=\"265\" font-size=\"9\" fill=\"#555\">(through anterior sacs)</text><text x=\"200\" y=\"290\" text-anchor=\"middle\" font-size=\"10\" fill=\"#333\">Air flows ONE WAY through lungs</text><text x=\"200\" y=\"305\" text-anchor=\"middle\" font-size=\"10\" fill=\"#333\">(during BOTH inhale and exhale)</text></svg><h2>Metabolic Demands</h2><p>During hovering flight, a hummingbird's metabolic rate increases to approximately 10 times its resting rate. If a human scaled up to this level of exertion, it would be equivalent to running multiple marathons simultaneously. This demands an oxygen delivery system of unparalleled efficiency.</p><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> Hummingbird lungs extract oxygen so efficiently that they can thrive at altitudes of 14,000+ feet in the Andes mountains, where humans struggle to breathe. The Hillstar Hummingbird lives permanently at elevations that would give most people severe altitude sickness!</div><h2>The Air Sac System</h2><p>Like all birds, hummingbirds possess air sacs - thin-walled extensions of the respiratory system that penetrate throughout the body. However, hummingbirds have optimized this system to its extreme:</p><ul><li><strong>Nine air sacs:</strong> These balloon-like structures are distributed throughout the body cavity and even extend into some bones.</li><li><strong>Unidirectional airflow:</strong> Unlike mammalian lungs where air flows in and out, the air sac system creates continuous one-way flow through the lungs. Air passes through the lungs during both inhalation AND exhalation.</li><li><strong>Cross-current gas exchange:</strong> Blood flows perpendicular to air flow in the lungs, creating the most efficient possible oxygen extraction - up to 10 times more efficient than human lungs.</li></ul><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Species Spotlight: Giant Hummingbird</strong><br/>The Giant Hummingbird (Patagona gigas) of South America is the largest hummingbird at 20-24 grams - about the weight of 8 pennies. Despite its \"giant\" size, its respiratory system is so efficient that it can hover at 15,000 feet in the Andes, feeding on high-altitude flowers where the oxygen concentration is only 60% of sea level.</div><h2>Breathing Rate</h2><p>At rest, hummingbirds breathe about 250 times per minute - already faster than most small mammals. During flight, this can increase to over 500 breaths per minute. Each breath is shallow but extremely efficient, rapidly cycling fresh air through the system.</p><h2>Integration with Flight</h2><p>The respiratory and flight systems work in perfect synchrony. The pumping action of the flight muscles actually assists in moving air through the air sac system, creating a beautiful example of biological integration where two systems enhance each other's performance.</p><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Human Comparison:</strong> If humans had hummingbird-style lungs, we could hold our breath for over an hour! Our tidal breathing (air in, air out) wastes about 30% of each breath as \"dead space\" - air that never reaches the gas exchange surfaces. Hummingbird unidirectional flow eliminates this inefficiency entirely.</div>",
              "exercise_questions": [
                {
                  "type": "single_select",
                  "id": "hb-resp-q1",
                  "question": "A biologist is dissecting a hummingbird to study its respiratory anatomy. How many distinct air sac structures should they expect to find throughout the body cavity?",
                  "correct_answer": "Nine air sacs",
                  "all_answers": ["Two air sacs", "Five air sacs", "Nine air sacs", "Twelve air sacs"]
                },
                {
                  "type": "multiple_select",
                  "id": "hb-resp-q2",
                  "question": "Engineers designing a high-efficiency ventilation system are studying hummingbird lungs for inspiration. Which features should they replicate?",
                  "correct_answers": ["One-way airflow through the exchange area", "Perpendicular flow between air and fluid for maximum transfer"],
                  "all_answers": ["One-way airflow through the exchange area", "Perpendicular flow between air and fluid for maximum transfer", "Single storage chamber", "Back-and-forth tidal flow"]
                },
                {
                  "type": "single_select",
                  "id": "hb-resp-q3",
                  "question": "A Hillstar Hummingbird thrives at 14,000 feet elevation where oxygen is scarce. What primarily enables it to survive where humans would struggle?",
                  "correct_answer": "Continuous airflow through lungs on both inhale and exhale",
                  "all_answers": ["Continuous airflow through lungs on both inhale and exhale", "Unusually large lungs", "Very slow breathing to conserve oxygen", "Ability to hold breath for long periods"]
                }
              ]
            }
          ],
          "prepost_questions": [
            {"id": "hb-anat-pp-1a", "variant": "A", "lo_index": 0, "type": "single_select", "question": "Which bone is enlarged in hummingbirds for muscle attachment?", "correct_answer": "Keel bone (sternum)", "all_answers": ["Keel bone (sternum)", "Femur", "Skull", "Pelvis"]},
            {"id": "hb-anat-pp-1b", "variant": "B", "lo_index": 0, "type": "single_select", "question": "What type of bones do hummingbirds have to reduce weight?", "correct_answer": "Hollow pneumatized bones", "all_answers": ["Hollow pneumatized bones", "Dense solid bones", "Cartilage only", "No bones"]},
            {"id": "hb-anat-pp-2a", "variant": "A", "lo_index": 1, "type": "single_select", "question": "How do fused vertebrae help hummingbirds?", "correct_answer": "Provide stability during hovering", "all_answers": ["Provide stability during hovering", "Allow greater flexibility", "Store more fat", "Produce more blood"]},
            {"id": "hb-anat-pp-2b", "variant": "B", "lo_index": 1, "type": "single_select", "question": "What allows hummingbird wings to rotate 180 degrees?", "correct_answer": "Ball-and-socket shoulder joints", "all_answers": ["Ball-and-socket shoulder joints", "Extra wing bones", "Longer feathers", "Stronger muscles only"]},
            {"id": "hb-anat-pp-3a", "variant": "A", "lo_index": 2, "type": "single_select", "question": "Which muscle powers the downstroke in hummingbird flight?", "correct_answer": "Pectoralis major", "all_answers": ["Pectoralis major", "Supracoracoideus", "Biceps", "Deltoid"]},
            {"id": "hb-anat-pp-3b", "variant": "B", "lo_index": 2, "type": "single_select", "question": "Which muscle uses a pulley system to power the upstroke?", "correct_answer": "Supracoracoideus", "all_answers": ["Supracoracoideus", "Pectoralis major", "Triceps", "Trapezius"]},
            {"id": "hb-anat-pp-4a", "variant": "A", "lo_index": 3, "type": "single_select", "question": "How many times per second can hummingbird wings beat?", "correct_answer": "50-80 times", "all_answers": ["10-20 times", "30-40 times", "50-80 times", "100+ times normally"]},
            {"id": "hb-anat-pp-4b", "variant": "B", "lo_index": 3, "type": "single_select", "question": "What prevents hummingbird fast-twitch muscles from fatiguing?", "correct_answer": "High mitochondria density and rich capillaries", "all_answers": ["High mitochondria density and rich capillaries", "Slow contraction speed", "Low oxygen demand", "Rest between beats"]},
            {"id": "hb-anat-pp-5a", "variant": "A", "lo_index": 4, "type": "single_select", "question": "How many breaths per minute during flight?", "correct_answer": "Over 500", "all_answers": ["50", "150", "250", "Over 500"]},
            {"id": "hb-anat-pp-5b", "variant": "B", "lo_index": 4, "type": "single_select", "question": "Why do hummingbirds need such efficient respiration?", "correct_answer": "Metabolic rate increases 10x during flight", "all_answers": ["Metabolic rate increases 10x during flight", "They live at high altitudes only", "They are very large", "They breathe underwater"]},
            {"id": "hb-anat-pp-6a", "variant": "A", "lo_index": 5, "type": "single_select", "question": "What do air sacs provide in the respiratory system?", "correct_answer": "Continuous unidirectional airflow", "all_answers": ["Continuous unidirectional airflow", "Blood storage", "Food digestion", "Waste removal"]},
            {"id": "hb-anat-pp-6b", "variant": "B", "lo_index": 5, "type": "single_select", "question": "How does cross-current gas exchange benefit hummingbirds?", "correct_answer": "Up to 10x more efficient oxygen extraction", "all_answers": ["Up to 10x more efficient oxygen extraction", "Faster digestion", "Better hearing", "Stronger bones"]}
          ]
        },
        {
          "source_id": "hb-feeding-metabolism",
          "title": "Feeding & Metabolism",
          "description": "Understand how hummingbirds fuel their high-energy lifestyle",
          "learning_objectives": [
            "Identify the primary food sources for hummingbirds",
            "Explain the role of nectar in hummingbird diet",
            "Describe the digestive adaptations of hummingbirds",
            "Explain how hummingbirds process sugars efficiently",
            "Describe torpor and its role in energy conservation",
            "Explain the metabolic rate differences between active and resting states"
          ],
          "lessons": [
            {
              "source_id": "hb-diet-foraging",
              "title": "Diet & Foraging",
              "learning_objective_indices": [0, 1],
              "content": "<p>Hummingbirds are specialized nectarivores, having evolved in close partnership with flowering plants over millions of years. This mutualistic relationship has shaped both their behavior and physiology in remarkable ways.</p><svg viewBox=\"0 0 400 280\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"280\" rx=\"8\"/><text x=\"200\" y=\"25\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"#333\">Hummingbird Feeding Adaptations</text><path d=\"M100,120 Q150,100 200,120\" fill=\"none\" stroke=\"#e74c3c\" stroke-width=\"3\"/><circle cx=\"200\" cy=\"120\" r=\"5\" fill=\"#e74c3c\"/><text x=\"100\" y=\"110\" font-size=\"10\" fill=\"#e74c3c\">Curved Bill</text><text x=\"100\" y=\"122\" font-size=\"8\" fill=\"#666\">(species-specific)</text><path d=\"M200,120 L320,120\" stroke=\"#9b59b6\" stroke-width=\"2\" stroke-dasharray=\"3,3\"/><path d=\"M200,125 L200,135 L320,135 L320,125\" fill=\"none\" stroke=\"#9b59b6\" stroke-width=\"1.5\"/><text x=\"260\" y=\"150\" text-anchor=\"middle\" font-size=\"9\" fill=\"#9b59b6\">Forked Tongue</text><text x=\"260\" y=\"162\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">15-20 licks/sec</text><ellipse cx=\"350\" cy=\"100\" rx=\"30\" ry=\"40\" fill=\"#ff9ff3\" stroke=\"#be2edd\" stroke-width=\"2\"/><text x=\"350\" y=\"105\" text-anchor=\"middle\" font-size=\"10\" fill=\"#be2edd\">Flower</text><circle cx=\"350\" cy=\"115\" r=\"8\" fill=\"#f9ca24\"/><text x=\"350\" y=\"155\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">Nectar</text><rect x=\"40\" y=\"180\" width=\"150\" height=\"80\" fill=\"#dfe6e9\" rx=\"5\"/><text x=\"115\" y=\"200\" text-anchor=\"middle\" font-size=\"11\" font-weight=\"bold\" fill=\"#2d3436\">Daily Diet</text><rect x=\"50\" y=\"210\" width=\"90\" height=\"15\" fill=\"#f39c12\"/><text x=\"95\" y=\"222\" text-anchor=\"middle\" font-size=\"8\" fill=\"white\">Nectar 90%</text><rect x=\"50\" y=\"230\" width=\"10\" height=\"15\" fill=\"#27ae60\"/><text x=\"95\" y=\"242\" font-size=\"8\" fill=\"#333\">Insects 10%</text><rect x=\"210\" y=\"180\" width=\"150\" height=\"80\" fill=\"#dfe6e9\" rx=\"5\"/><text x=\"285\" y=\"200\" text-anchor=\"middle\" font-size=\"11\" font-weight=\"bold\" fill=\"#2d3436\">Daily Visits</text><text x=\"285\" y=\"225\" text-anchor=\"middle\" font-size=\"24\" fill=\"#e74c3c\">1,000-2,000</text><text x=\"285\" y=\"245\" text-anchor=\"middle\" font-size=\"10\" fill=\"#666\">flowers per day</text></svg><h2>Primary Food Sources</h2><p>The hummingbird diet consists of two main components:</p><ul><li><strong>Nectar:</strong> Comprising about 90% of their caloric intake, nectar from flowers provides the simple sugars (primarily sucrose, glucose, and fructose) that fuel their intense metabolism. A hummingbird may consume nectar from 1,000-2,000 flowers every day.</li><li><strong>Arthropods:</strong> Small insects and spiders provide essential proteins, fats, vitamins, and minerals that nectar cannot supply. Hummingbirds catch insects mid-flight (hawking) or pluck them from leaves and spider webs (gleaning). This protein source is especially crucial during breeding season and for growing chicks.</li></ul><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> Hummingbirds have exceptional spatial memory. They remember the exact location of every flower they've visited, when they visited it, and how long each flower takes to refill with nectar. Some researchers call this \"episodic-like memory\" - previously thought to be unique to humans!</div><h2>Foraging Behavior</h2><p>Hummingbirds are highly territorial feeders. A single bird may defend a patch of flowers aggressively, investing significant energy in chasing away competitors. This makes sense when you consider that they must consume roughly half their body weight in nectar each day - reliable food sources are worth fighting for.</p><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Species Spotlight: Sword-billed Hummingbird</strong><br/>The Sword-billed Hummingbird (Ensifera ensifera) of the Andes has a bill longer than its body (excluding tail) - up to 10cm! This extreme adaptation allows it to feed from deep tubular flowers like Passiflora mixta that no other hummingbird can access. It's the only bird that must preen with its feet because its bill is too long to reach its feathers.</div><h2>Physical Adaptations for Feeding</h2><p>Evolution has equipped hummingbirds with specialized feeding apparatus:</p><ul><li><strong>Bill shape:</strong> Bills vary by species, often matching specific flower types. Some are long and curved to access tubular flowers; others are short and straight for open blooms.</li><li><strong>Tongue mechanism:</strong> The hummingbird tongue is not a simple straw. It's a forked, flexible structure that extends far beyond the bill tip. The tongue uses capillary action and elastic energy to lap nectar at rates up to 15-20 licks per second.</li><li><strong>Memory:</strong> Hummingbirds remember which flowers they've visited recently and their refill times, allowing efficient foraging routes.</li></ul><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Human Comparison:</strong> If a human had to eat proportionally as much as a hummingbird, we'd need to consume about 150,000 calories per day - roughly 300 Big Macs! And we'd need to do it by visiting tens of thousands of individual food sources, remembering exactly when we last visited each one.</div>",
              "exercise_questions": [
                {"type": "single_select", "id": "hb-diet-q1", "question": "A wildlife researcher is setting up hummingbird feeders in a garden. To match the feeding intensity of wild foraging, approximately how many flower-equivalent feeding opportunities should she provide per hummingbird per day?", "correct_answer": "1,000-2,000 feeding opportunities", "all_answers": ["50-100 feeding opportunities", "200-500 feeding opportunities", "1,000-2,000 feeding opportunities", "5,000+ feeding opportunities"]},
                {"type": "multiple_select", "id": "hb-diet-q2", "question": "A hummingbird rehabilitation center needs to create a complete diet for recovering birds. Which food sources must they provide?", "correct_answers": ["Sugar water or nectar substitute", "Small insects like fruit flies"], "all_answers": ["Sugar water or nectar substitute", "Small insects like fruit flies", "Seeds and grains", "Leafy vegetables"]},
                {"type": "single_select", "id": "hb-diet-q3", "question": "A female hummingbird is raising chicks and needs extra protein. Why would she increase her insect hunting rather than simply drinking more nectar?", "correct_answer": "Nectar provides only sugar - insects provide essential proteins for growth", "all_answers": ["Nectar provides only sugar - insects provide essential proteins for growth", "Insects taste better to baby hummingbirds", "Insects are easier to catch than finding flowers", "Nectar has too much protein already"]}
              ]
            },
            {
              "source_id": "hb-digestive-system",
              "title": "Digestive System",
              "learning_objective_indices": [2, 3],
              "content": "<p>The hummingbird digestive system is a masterpiece of biological optimization, designed for one primary purpose: extracting and processing sugars with maximum speed and efficiency.</p><svg viewBox=\"0 0 400 300\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"300\" rx=\"8\"/><text x=\"200\" y=\"25\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"#333\">Streamlined Digestive System</text><text x=\"60\" y=\"60\" font-size=\"11\" fill=\"#e74c3c\">Most Birds:</text><ellipse cx=\"60\" cy=\"90\" rx=\"25\" ry=\"20\" fill=\"#ffcdd2\" stroke=\"#c62828\" stroke-width=\"2\"/><text x=\"60\" y=\"95\" text-anchor=\"middle\" font-size=\"8\" fill=\"#c62828\">Large Crop</text><text x=\"60\" y=\"125\" font-size=\"8\" fill=\"#666\">Food storage</text><path d=\"M60,140 L60,180\" stroke=\"#c62828\" stroke-width=\"2\"/><rect x=\"40\" y=\"180\" width=\"40\" height=\"50\" fill=\"#ffcdd2\" stroke=\"#c62828\" rx=\"5\"/><text x=\"60\" y=\"210\" text-anchor=\"middle\" font-size=\"7\" fill=\"#c62828\">Intestine</text><text x=\"200\" y=\"60\" font-size=\"11\" fill=\"#4caf50\">Hummingbirds:</text><ellipse cx=\"200\" cy=\"90\" rx=\"8\" ry=\"6\" fill=\"#c8e6c9\" stroke=\"#2e7d32\" stroke-width=\"2\"/><text x=\"200\" y=\"95\" text-anchor=\"middle\" font-size=\"6\" fill=\"#2e7d32\">Tiny</text><text x=\"200\" y=\"125\" font-size=\"8\" fill=\"#666\">Minimal storage</text><path d=\"M200,105 L200,130\" stroke=\"#2e7d32\" stroke-width=\"2\"/><rect x=\"160\" y=\"130\" width=\"80\" height=\"80\" fill=\"#c8e6c9\" stroke=\"#2e7d32\" rx=\"5\"/><text x=\"200\" y=\"160\" text-anchor=\"middle\" font-size=\"8\" fill=\"#2e7d32\">Highly Efficient</text><text x=\"200\" y=\"175\" text-anchor=\"middle\" font-size=\"8\" fill=\"#2e7d32\">Intestine</text><text x=\"200\" y=\"195\" text-anchor=\"middle\" font-size=\"7\" fill=\"#666\">High sucrase</text><text x=\"200\" y=\"205\" text-anchor=\"middle\" font-size=\"7\" fill=\"#666\">Max surface area</text><rect x=\"280\" y=\"60\" width=\"100\" height=\"100\" fill=\"#fff3e0\" stroke=\"#ff9800\" rx=\"5\"/><text x=\"330\" y=\"80\" text-anchor=\"middle\" font-size=\"10\" font-weight=\"bold\" fill=\"#e65100\">Speed</text><text x=\"330\" y=\"100\" text-anchor=\"middle\" font-size=\"20\" fill=\"#e65100\">15-20</text><text x=\"330\" y=\"115\" text-anchor=\"middle\" font-size=\"9\" fill=\"#e65100\">minutes</text><text x=\"330\" y=\"135\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">nectar → energy</text><text x=\"330\" y=\"150\" text-anchor=\"middle\" font-size=\"7\" fill=\"#999\">(humans: 2+ hours)</text><rect x=\"50\" y=\"240\" width=\"300\" height=\"45\" fill=\"#e3f2fd\" stroke=\"#2196f3\" rx=\"5\"/><text x=\"200\" y=\"260\" text-anchor=\"middle\" font-size=\"10\" fill=\"#1565c0\">Water Challenge: Nectar = 80% water</text><text x=\"200\" y=\"275\" text-anchor=\"middle\" font-size=\"9\" fill=\"#1565c0\">Kidneys filter body weight in water DAILY</text></svg><h2>Streamlined for Speed</h2><p>Unlike most birds, hummingbirds have virtually eliminated food storage. The crop - a pouch in the esophagus where most birds store food - is nearly vestigial in hummingbirds. Food passes almost directly to the intestines because storage would add unnecessary weight and delay energy availability.</p><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> Hummingbirds can switch from burning stored fat to burning freshly consumed sugar within minutes. They're essentially running on \"just-in-time\" fuel delivery - like a race car that refuels while still on the track!</div><h2>Intestinal Adaptations</h2><p>The small intestine is where the magic happens:</p><ul><li><strong>Surface area:</strong> The intestinal lining has extensive folds and microvilli, maximizing the surface area for sugar absorption.</li><li><strong>Enzyme concentration:</strong> Extremely high levels of sucrase (which breaks down sucrose) and other digestive enzymes line the intestinal walls.</li><li><strong>Rapid absorption:</strong> Specialized transport proteins move glucose and fructose into the bloodstream with remarkable efficiency.</li></ul><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Species Spotlight: Rufous Hummingbird</strong><br/>The Rufous Hummingbird (Selasphorus rufus) migrates up to 3,900 miles from Mexico to Alaska - the longest migration relative to body size of any bird. To fuel this journey, its digestive system can process nectar so efficiently that it gains 10% of body weight per day during migration stopovers, building crucial fat reserves.</div><h2>Processing Speed</h2><p>The result of these adaptations is astounding: sugars from nectar can be absorbed and available for use within 15-20 minutes of consumption. This is roughly 10 times faster than human sugar digestion. The speed is essential because a hovering hummingbird burns through its available energy in just 15-20 minutes - it quite literally cannot afford slow digestion.</p><h2>Water Management</h2><p>Nectar is typically 20-25% sugar and 75-80% water. Consuming half their body weight in nectar means hummingbirds also take in enormous amounts of water. Their kidneys work overtime, producing very dilute urine to expel excess water while retaining essential electrolytes.</p><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Human Comparison:</strong> If human kidneys worked as hard as hummingbird kidneys (proportionally), we'd need to process about 150 liters of water per day - roughly 40 gallons, or the equivalent of taking 300 trips to the bathroom!</div>",
              "exercise_questions": [
                {"type": "single_select", "id": "hb-digest-q1", "question": "A hummingbird feeds at 8:00 AM. By what time should the energy from that nectar be available for hovering flight?", "correct_answer": "8:15-8:20 AM (15-20 minutes)", "all_answers": ["8:01-8:02 AM (1-2 minutes)", "8:15-8:20 AM (15-20 minutes)", "9:00-10:00 AM (1-2 hours)", "2:00 PM (6+ hours)"]},
                {"type": "single_select", "id": "hb-digest-q2", "question": "A biochemist is developing an artificial nectar for hummingbird feeders. The nectar contains sucrose (table sugar). Which enzyme must be present in high concentrations in hummingbird intestines to process this?", "correct_answer": "Sucrase (breaks down sucrose)", "all_answers": ["Sucrase (breaks down sucrose)", "Amylase (breaks down starch)", "Lipase (breaks down fats)", "Pepsin (breaks down proteins)"]},
                {"type": "single_select", "id": "hb-digest-q3", "question": "An evolutionary biologist compares bird digestive systems. Why would a large crop (food storage organ) actually be HARMFUL for a hummingbird's lifestyle?", "correct_answer": "Added weight slows flight and stored food delays energy availability", "all_answers": ["Added weight slows flight and stored food delays energy availability", "Large crops attract predators", "Crops interfere with wing movement", "Hummingbirds are allergic to crops"]}
              ]
            },
            {
              "source_id": "hb-energy-metabolism",
              "title": "Energy & Metabolism",
              "learning_objective_indices": [4, 5],
              "content": "<p>Hummingbirds live on the edge of energy balance. Their metabolic rate during flight is the highest of any vertebrate, yet they have virtually no ability to store energy as fat. This precarious situation has led to fascinating adaptations.</p><svg viewBox=\"0 0 400 320\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"320\" rx=\"8\"/><text x=\"200\" y=\"25\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"#333\">Active vs Torpor: Metabolic States</text><rect x=\"30\" y=\"45\" width=\"160\" height=\"120\" fill=\"#ffebee\" stroke=\"#c62828\" stroke-width=\"2\" rx=\"5\"/><text x=\"110\" y=\"65\" text-anchor=\"middle\" font-size=\"12\" font-weight=\"bold\" fill=\"#c62828\">ACTIVE FLIGHT</text><text x=\"50\" y=\"90\" font-size=\"10\" fill=\"#333\">Heart: <tspan fill=\"#c62828\" font-weight=\"bold\">1,200</tspan> bpm</text><text x=\"50\" y=\"108\" font-size=\"10\" fill=\"#333\">Temp: <tspan fill=\"#c62828\" font-weight=\"bold\">40°C</tspan> (104°F)</text><text x=\"50\" y=\"126\" font-size=\"10\" fill=\"#333\">Metabolism: <tspan fill=\"#c62828\" font-weight=\"bold\">100%</tspan></text><text x=\"50\" y=\"150\" font-size=\"9\" fill=\"#666\">Burns through reserves</text><text x=\"50\" y=\"162\" font-size=\"9\" fill=\"#666\">in 15-20 minutes</text><rect x=\"210\" y=\"45\" width=\"160\" height=\"120\" fill=\"#e3f2fd\" stroke=\"#1565c0\" stroke-width=\"2\" rx=\"5\"/><text x=\"290\" y=\"65\" text-anchor=\"middle\" font-size=\"12\" font-weight=\"bold\" fill=\"#1565c0\">TORPOR</text><text x=\"230\" y=\"90\" font-size=\"10\" fill=\"#333\">Heart: <tspan fill=\"#1565c0\" font-weight=\"bold\">50</tspan> bpm</text><text x=\"230\" y=\"108\" font-size=\"10\" fill=\"#333\">Temp: <tspan fill=\"#1565c0\" font-weight=\"bold\">18°C</tspan> (64°F)</text><text x=\"230\" y=\"126\" font-size=\"10\" fill=\"#333\">Metabolism: <tspan fill=\"#1565c0\" font-weight=\"bold\">5%</tspan></text><text x=\"230\" y=\"150\" font-size=\"9\" fill=\"#666\">Survives 8-12 hours</text><text x=\"230\" y=\"162\" font-size=\"9\" fill=\"#666\">without feeding</text><path d=\"M190,105 L210,105\" stroke=\"#333\" stroke-width=\"2\" marker-end=\"url(#arrowB)\"/><defs><marker id=\"arrowB\" markerWidth=\"6\" markerHeight=\"6\" refX=\"5\" refY=\"3\" orient=\"auto\"><path d=\"M0,0 L6,3 L0,6 Z\" fill=\"#333\"/></marker></defs><rect x=\"30\" y=\"180\" width=\"340\" height=\"60\" fill=\"#fff3e0\" stroke=\"#ff9800\" rx=\"5\"/><text x=\"200\" y=\"200\" text-anchor=\"middle\" font-size=\"11\" font-weight=\"bold\" fill=\"#e65100\">95% Reduction!</text><text x=\"200\" y=\"220\" text-anchor=\"middle\" font-size=\"10\" fill=\"#333\">Torpor reduces energy needs by up to 95%</text><text x=\"200\" y=\"235\" text-anchor=\"middle\" font-size=\"9\" fill=\"#666\">Like turning off 19 of every 20 light bulbs</text><rect x=\"30\" y=\"250\" width=\"340\" height=\"55\" fill=\"#fce4ec\" stroke=\"#c2185b\" rx=\"5\"/><text x=\"200\" y=\"270\" text-anchor=\"middle\" font-size=\"10\" font-weight=\"bold\" fill=\"#c2185b\">Wake-up Cost</text><text x=\"200\" y=\"288\" text-anchor=\"middle\" font-size=\"9\" fill=\"#333\">20-60 minutes of shivering to rewarm</text><text x=\"200\" y=\"300\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">Vulnerable to predators during this time</text></svg><h2>Metabolic Extremes</h2><p>The numbers are staggering:</p><ul><li><strong>Heart rate:</strong> Up to 1,200 beats per minute during flight (compared to 60-100 in resting humans)</li><li><strong>Body temperature:</strong> 40-41°C (104-106°F), among the highest of any bird</li><li><strong>Oxygen consumption:</strong> About 10 times the resting rate during hovering</li><li><strong>Sugar consumption:</strong> Equivalent to a human eating 400+ pounds of sugar per day</li></ul><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> A hummingbird's heart beats so fast that individual beats blend together into a continuous hum - that's where the name \"hummingbird\" actually comes from (along with their wing sound). A doctor using a stethoscope would hear a buzz, not distinct heartbeats!</div><h2>The Energy Crisis of Night</h2><p>With essentially no fat reserves, how do hummingbirds survive overnight without feeding? The answer is torpor - a state of controlled hypothermia that represents one of the most dramatic physiological adaptations in the animal kingdom.</p><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Species Spotlight: Andean Hillstar</strong><br/>The Andean Hillstar (Oreotrochilus estella) lives at elevations up to 17,100 feet where nighttime temperatures drop below freezing. It enters torpor almost every night, allowing its body temperature to drop to just 6.8°C (44°F) - the lowest recorded for any bird. This extreme torpor lets it survive in conditions that would kill most other hummingbirds.</div><h2>Torpor: Controlled Shutdown</h2><p>As night approaches, hummingbirds can enter torpor:</p><ul><li><strong>Metabolic rate:</strong> Drops by up to 95%</li><li><strong>Heart rate:</strong> Slows from 1,200+ to as low as 50 beats per minute</li><li><strong>Body temperature:</strong> Can drop from 40°C to as low as 18°C (64°F)</li><li><strong>Responsiveness:</strong> The bird becomes nearly unresponsive, appearing dead to casual observation</li></ul><h2>Awakening from Torpor</h2><p>Emerging from torpor takes 20-60 minutes of intense shivering as the bird gradually rewarms. During this vulnerable period, hummingbirds cannot fly or escape predators. The energy savings of torpor must be balanced against these risks, and not all hummingbirds enter torpor every night - it depends on energy reserves and environmental conditions.</p><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Human Comparison:</strong> If a human entered a torpor-like state proportional to a hummingbird's, our heart rate would drop from 70 bpm to about 3 bpm, our body temperature would fall to 15°C (59°F), and we'd survive on just 100 calories per day instead of 2,000. Medical science is actually studying torpor to develop suspended animation for long space flights!</div>",
              "exercise_questions": [
                {"type": "single_select", "id": "hb-energy-q1", "question": "A birdwatcher finds a hummingbird on its perch at dawn that appears dead - cold, unresponsive, barely breathing. What is the most likely explanation?", "correct_answer": "The bird is in torpor and will revive as it warms up", "all_answers": ["The bird is in torpor and will revive as it warms up", "The bird is performing a mating display", "The bird is sick and needs veterinary care immediately", "The bird is simply sleeping normally"]},
                {"type": "single_select", "id": "hb-energy-q2", "question": "A researcher wants to study how much energy torpor saves. If a hummingbird normally uses 100 units of energy per hour while resting, approximately how many units would it use during torpor?", "correct_answer": "About 5 units (95% reduction)", "all_answers": ["About 75 units (25% reduction)", "About 50 units (50% reduction)", "About 25 units (75% reduction)", "About 5 units (95% reduction)"]},
                {"type": "single_select", "id": "hb-energy-q3", "question": "A scientist is monitoring a hummingbird with a tiny heart rate sensor. During hovering flight, approximately how many heartbeats should register per minute?", "correct_answer": "Around 1,200 beats per minute", "all_answers": ["Around 200 beats per minute", "Around 500 beats per minute", "Around 1,200 beats per minute", "Over 2,000 beats per minute"]}
              ]
            }
          ],
          "prepost_questions": [
            {"id": "hb-metab-pp-1a", "variant": "A", "lo_index": 0, "type": "single_select", "question": "What is the primary food source for hummingbirds?", "correct_answer": "Nectar from flowers", "all_answers": ["Nectar from flowers", "Seeds", "Fish", "Leaves"]},
            {"id": "hb-metab-pp-1b", "variant": "B", "lo_index": 0, "type": "single_select", "question": "What provides protein in the hummingbird diet?", "correct_answer": "Small insects and spiders", "all_answers": ["Small insects and spiders", "Nectar", "Pollen", "Fruit"]},
            {"id": "hb-metab-pp-2a", "variant": "A", "lo_index": 1, "type": "single_select", "question": "How much of their body weight in nectar do they consume daily?", "correct_answer": "About half", "all_answers": ["10%", "25%", "About half", "Twice their weight"]},
            {"id": "hb-metab-pp-2b", "variant": "B", "lo_index": 1, "type": "single_select", "question": "What physical adaptation helps extract nectar?", "correct_answer": "Specialized bill and extensible tongue", "all_answers": ["Specialized bill and extensible tongue", "Large crop", "Strong beak for cracking", "Webbed feet"]},
            {"id": "hb-metab-pp-3a", "variant": "A", "lo_index": 2, "type": "single_select", "question": "Why do hummingbirds have minimal crop storage?", "correct_answer": "To minimize weight and speed digestion", "all_answers": ["To minimize weight and speed digestion", "To store more food", "To improve flight acoustics", "To attract mates"]},
            {"id": "hb-metab-pp-3b", "variant": "B", "lo_index": 2, "type": "single_select", "question": "Where does most sugar absorption occur?", "correct_answer": "Small intestine", "all_answers": ["Crop", "Stomach", "Small intestine", "Liver"]},
            {"id": "hb-metab-pp-4a", "variant": "A", "lo_index": 3, "type": "single_select", "question": "What enzyme is key to sugar processing?", "correct_answer": "Sucrase", "all_answers": ["Sucrase", "Lactase", "Maltase", "Pepsin"]},
            {"id": "hb-metab-pp-4b", "variant": "B", "lo_index": 3, "type": "single_select", "question": "How quickly is sugar absorbed after feeding?", "correct_answer": "15-20 minutes", "all_answers": ["1-2 minutes", "15-20 minutes", "1-2 hours", "6-8 hours"]},
            {"id": "hb-metab-pp-5a", "variant": "A", "lo_index": 4, "type": "single_select", "question": "Why do hummingbirds enter torpor?", "correct_answer": "To survive overnight without feeding", "all_answers": ["To survive overnight without feeding", "To fly faster", "To attract mates", "To digest food"]},
            {"id": "hb-metab-pp-5b", "variant": "B", "lo_index": 4, "type": "single_select", "question": "What happens to body temperature during torpor?", "correct_answer": "Drops dramatically (can reach 18°C)", "all_answers": ["Drops dramatically (can reach 18°C)", "Increases", "Stays the same", "Fluctuates rapidly"]},
            {"id": "hb-metab-pp-6a", "variant": "A", "lo_index": 5, "type": "single_select", "question": "What is the heart rate during active flight?", "correct_answer": "Up to 1,200 beats per minute", "all_answers": ["100 beats per minute", "400 beats per minute", "Up to 1,200 beats per minute", "2,000+ beats per minute"]},
            {"id": "hb-metab-pp-6b", "variant": "B", "lo_index": 5, "type": "single_select", "question": "How long does it take to emerge from torpor?", "correct_answer": "20-60 minutes of shivering", "all_answers": ["Instantly", "5-10 minutes", "20-60 minutes of shivering", "Several hours"]}
          ]
        },
        {
          "source_id": "hb-flight-mechanics",
          "title": "Flight Mechanics",
          "description": "Discover how hummingbirds achieve their remarkable flight abilities",
          "learning_objectives": [
            "Identify the unique aspects of hummingbird wing anatomy",
            "Explain how wing structure enables hovering",
            "Describe the mechanics of hovering flight",
            "Explain how hummingbirds generate lift on both strokes",
            "Describe the aerial maneuvers hummingbirds can perform",
            "Explain the physics of backward and sideways flight"
          ],
          "lessons": [
            {
              "source_id": "hb-wing-anatomy",
              "title": "Wing Anatomy",
              "learning_objective_indices": [0, 1],
              "content": "<p>Hummingbird wings are unlike those of any other bird. While most birds have wings optimized for soaring, gliding, or powerful flapping flight, hummingbird wings are designed for something far more demanding: sustained hovering in still air.</p><svg viewBox=\"0 0 400 280\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"280\" rx=\"8\"/><text x=\"200\" y=\"25\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"#333\">Wing Structure Comparison</text><text x=\"100\" y=\"55\" text-anchor=\"middle\" font-size=\"11\" fill=\"#e74c3c\">Typical Bird</text><line x1=\"50\" y1=\"90\" x2=\"150\" y2=\"80\" stroke=\"#e74c3c\" stroke-width=\"4\"/><rect x=\"40\" y=\"75\" width=\"40\" height=\"30\" fill=\"#ffcdd2\" stroke=\"#c62828\" rx=\"3\"/><text x=\"60\" y=\"95\" text-anchor=\"middle\" font-size=\"7\" fill=\"#c62828\">Arm 50%</text><rect x=\"80\" y=\"70\" width=\"70\" height=\"25\" fill=\"#ffcdd2\" stroke=\"#c62828\" rx=\"3\"/><text x=\"115\" y=\"87\" text-anchor=\"middle\" font-size=\"7\" fill=\"#c62828\">Hand 50%</text><text x=\"300\" y=\"55\" text-anchor=\"middle\" font-size=\"11\" fill=\"#27ae60\">Hummingbird</text><line x1=\"250\" y1=\"90\" x2=\"350\" y2=\"80\" stroke=\"#27ae60\" stroke-width=\"4\"/><rect x=\"240\" y=\"80\" width=\"20\" height=\"20\" fill=\"#c8e6c9\" stroke=\"#2e7d32\" rx=\"3\"/><text x=\"250\" y=\"95\" text-anchor=\"middle\" font-size=\"6\" fill=\"#2e7d32\">20%</text><rect x=\"260\" y=\"70\" width=\"90\" height=\"30\" fill=\"#c8e6c9\" stroke=\"#2e7d32\" rx=\"3\"/><text x=\"305\" y=\"90\" text-anchor=\"middle\" font-size=\"8\" fill=\"#2e7d32\">Hand 80%</text><circle cx=\"100\" cy=\"150\" r=\"30\" fill=\"#fff\" stroke=\"#e74c3c\" stroke-width=\"2\"/><path d=\"M100,120 L100,150\" stroke=\"#e74c3c\" stroke-width=\"2\"/><path d=\"M70,150 L100,150\" stroke=\"#e74c3c\" stroke-width=\"2\" stroke-dasharray=\"3,2\"/><text x=\"100\" y=\"195\" text-anchor=\"middle\" font-size=\"9\" fill=\"#e74c3c\">Limited rotation</text><text x=\"100\" y=\"207\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">~90°</text><circle cx=\"300\" cy=\"150\" r=\"30\" fill=\"#c8e6c9\" stroke=\"#27ae60\" stroke-width=\"2\"/><circle cx=\"300\" cy=\"150\" r=\"6\" fill=\"#27ae60\"/><path d=\"M300,120 C330,140 330,160 300,180\" stroke=\"#27ae60\" stroke-width=\"2\" fill=\"none\"/><path d=\"M300,120 C270,140 270,160 300,180\" stroke=\"#27ae60\" stroke-width=\"2\" fill=\"none\" stroke-dasharray=\"3,2\"/><text x=\"300\" y=\"195\" text-anchor=\"middle\" font-size=\"9\" fill=\"#27ae60\">Ball-and-socket</text><text x=\"300\" y=\"207\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">180° rotation</text><rect x=\"50\" y=\"230\" width=\"140\" height=\"35\" fill=\"#e3f2fd\" stroke=\"#1565c0\" rx=\"5\"/><text x=\"120\" y=\"250\" text-anchor=\"middle\" font-size=\"9\" fill=\"#1565c0\">Flexible for soaring</text><rect x=\"210\" y=\"230\" width=\"140\" height=\"35\" fill=\"#e8f5e9\" stroke=\"#2e7d32\" rx=\"5\"/><text x=\"280\" y=\"250\" text-anchor=\"middle\" font-size=\"9\" fill=\"#2e7d32\">Rigid like helicopter blade</text></svg><h2>Structural Differences</h2><p>Several key features distinguish hummingbird wings:</p><ul><li><strong>Proportions:</strong> Hummingbird wings are proportionally shorter than those of other birds, with a longer hand section (primaries) relative to the arm section (secondaries). The primaries can make up 80% of wing length.</li><li><strong>Rigidity:</strong> The wing is more rigid than typical bird wings, functioning more like an insect wing or helicopter blade than a flexible bird wing.</li><li><strong>Bone structure:</strong> The arm bones are shorter and more robust, while the wrist and hand bones are elongated. This creates a wing that pivots primarily at the shoulder.</li></ul><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> Hummingbird wings have evolved to be more similar to insect wings than to other bird wings. In fact, their flight mechanics were so poorly understood that scientists had to use high-speed cameras filming at 1,000+ frames per second to finally figure out how hovering works!</div><h2>The Ball-and-Socket Shoulder</h2><p>The most crucial adaptation is the shoulder joint. Unlike other birds with more limited shoulder mobility, hummingbirds have a true ball-and-socket joint that allows:</p><ul><li>180-degree rotation of the wing</li><li>The ability to flip the wing completely over between upstroke and downstroke</li><li>Independent control of each wing</li></ul><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Species Spotlight: Violet Sabrewing</strong><br/>The Violet Sabrewing (Campylopterus hemileucurus) of Central America is one of the largest hummingbirds outside South America, with a wingspan of 7 inches. Despite its larger size, its wing structure maintains the same 80% primary ratio, allowing it to hover just as effectively as its smaller relatives - it just beats its wings more slowly (about 15 times per second vs. 80+ for tiny species).</div><h2>Feather Arrangement</h2><p>The flight feathers are arranged to create an efficient airfoil that works both right-side-up and upside-down. This symmetrical design is essential for generating lift on both strokes of the wing beat cycle.</p><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Human Comparison:</strong> If our arms worked like hummingbird wings, we could rotate them 180 degrees at the shoulder - turning our palms from facing the ceiling to facing the floor by rotating at the shoulder alone, not the wrist. Try it - you'll find humans can only rotate about 90 degrees before having to use the forearm!</div>",
              "exercise_questions": [
                {"type": "single_select", "id": "hb-wing-q1", "question": "A drone engineer wants to build a micro-UAV that can hover like a hummingbird. Based on hummingbird wing design, what characteristics should the drone's 'wings' have?", "correct_answer": "Short and rigid, like helicopter blades", "all_answers": ["Short and rigid, like helicopter blades", "Long and flexible for soaring", "Identical to standard airplane wings", "No wings needed - use propellers only"]},
                {"type": "single_select", "id": "hb-wing-q2", "question": "A robotics team is designing an articulated arm for a hovering robot. What type of joint would best mimic hummingbird shoulder function?", "correct_answer": "Ball-and-socket joint allowing 180° rotation", "all_answers": ["Hinge joint like a door", "Ball-and-socket joint allowing 180° rotation", "Pivot joint like turning a key", "Fixed joint for stability"]},
                {"type": "single_select", "id": "hb-wing-q3", "question": "An ornithologist measures a hummingbird wing that is 5cm long. Based on typical hummingbird proportions, approximately how long is the 'hand' section (primaries)?", "correct_answer": "About 4cm (80% of wing length)", "all_answers": ["About 1.5cm (30%)", "About 2.5cm (50%)", "About 4cm (80% of wing length)", "About 4.75cm (95%)"]}
              ]
            },
            {
              "source_id": "hb-hovering-flight",
              "title": "Hovering Flight",
              "learning_objective_indices": [2, 3],
              "content": "<p>Hummingbirds are the only birds capable of true sustained hovering in still air. While other birds like kingfishers and kestrels can hover briefly, they require wind assistance. Hummingbirds achieve this feat through a completely unique wing motion.</p><svg viewBox=\"0 0 400 300\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"300\" rx=\"8\"/><text x=\"200\" y=\"25\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"#333\">Figure-8 Wing Pattern</text><ellipse cx=\"200\" cy=\"130\" rx=\"120\" ry=\"50\" fill=\"none\" stroke=\"#3498db\" stroke-width=\"3\" stroke-dasharray=\"8,4\"/><circle cx=\"80\" cy=\"130\" r=\"8\" fill=\"#e74c3c\"/><text x=\"80\" y=\"155\" text-anchor=\"middle\" font-size=\"9\" fill=\"#e74c3c\">Rotate 180°</text><circle cx=\"320\" cy=\"130\" r=\"8\" fill=\"#e74c3c\"/><text x=\"320\" y=\"155\" text-anchor=\"middle\" font-size=\"9\" fill=\"#e74c3c\">Rotate 180°</text><path d=\"M110,130 L200,115\" stroke=\"#27ae60\" stroke-width=\"4\" marker-end=\"url(#arrowGreen)\"/><text x=\"155\" y=\"108\" font-size=\"10\" fill=\"#27ae60\">Forward stroke</text><path d=\"M200,145 L290,130\" stroke=\"#9b59b6\" stroke-width=\"4\" marker-end=\"url(#arrowPurple)\"/><text x=\"245\" y=\"168\" font-size=\"10\" fill=\"#9b59b6\">Backward stroke</text><defs><marker id=\"arrowGreen\" markerWidth=\"8\" markerHeight=\"8\" refX=\"6\" refY=\"4\" orient=\"auto\"><path d=\"M0,0 L8,4 L0,8 Z\" fill=\"#27ae60\"/></marker><marker id=\"arrowPurple\" markerWidth=\"8\" markerHeight=\"8\" refX=\"6\" refY=\"4\" orient=\"auto\"><path d=\"M0,0 L8,4 L0,8 Z\" fill=\"#9b59b6\"/></marker></defs><rect x=\"50\" y=\"200\" width=\"140\" height=\"45\" fill=\"#e8f5e9\" stroke=\"#27ae60\" rx=\"5\"/><text x=\"120\" y=\"218\" text-anchor=\"middle\" font-size=\"10\" fill=\"#27ae60\">Forward Stroke</text><text x=\"120\" y=\"235\" text-anchor=\"middle\" font-size=\"16\" font-weight=\"bold\" fill=\"#27ae60\">50%</text><text x=\"120\" y=\"248\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">of total lift</text><rect x=\"210\" y=\"200\" width=\"140\" height=\"45\" fill=\"#f3e5f5\" stroke=\"#9b59b6\" rx=\"5\"/><text x=\"280\" y=\"218\" text-anchor=\"middle\" font-size=\"10\" fill=\"#9b59b6\">Backward Stroke</text><text x=\"280\" y=\"235\" text-anchor=\"middle\" font-size=\"16\" font-weight=\"bold\" fill=\"#9b59b6\">50%</text><text x=\"280\" y=\"248\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">of total lift</text><text x=\"200\" y=\"275\" text-anchor=\"middle\" font-size=\"10\" fill=\"#333\">Other birds: 70-80% downstroke only</text></svg><h2>The Figure-8 Pattern</h2><p>During hovering, hummingbird wings trace a figure-8 pattern (or more precisely, a horizontal oval) rather than flapping up and down:</p><ul><li>Wings sweep forward and backward in nearly horizontal strokes</li><li>At the end of each stroke, the wing rotates 180 degrees</li><li>This keeps the leading edge of the wing forward throughout the cycle</li></ul><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> This wing pattern wasn't fully understood until 2005 when researchers at UC Berkeley used high-speed cameras and robot models to finally crack the code. Before then, scientists couldn't explain how hummingbirds generated enough lift to hover - the physics just didn't seem to work with traditional bird flight models!</div><h2>Lift on Both Strokes</h2><p>The genius of this system is that it generates lift during both the forward and backward strokes:</p><ul><li><strong>Forward stroke:</strong> Wing moves forward with leading edge first, generating downward air pressure and upward lift</li><li><strong>Backward stroke:</strong> Wing flips over and moves backward, again with leading edge first, generating similar lift</li><li><strong>Balance:</strong> About 50% of lift comes from each stroke (compared to 70-80% from the downstroke in other birds)</li></ul><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Species Spotlight: Amethyst Woodstar</strong><br/>The tiny Amethyst Woodstar (Calliphlox amethystina) of South America weighs only 2.5 grams and has one of the fastest wing beats - up to 80 times per second during hovering! At that speed, each complete figure-8 cycle takes just 0.0125 seconds. The wing tip travels at about 30 mph despite the tiny wingspan.</div><h2>Speed and Control</h2><p>Wing beat frequency varies with species size and activity:</p><ul><li>Larger species: 12-15 beats per second</li><li>Smaller species: 70-80 beats per second</li><li>During courtship dives: Up to 200 beats per second</li></ul><p>Each wing can be controlled independently, allowing for instantaneous adjustments in position and attitude.</p><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Human Comparison:</strong> Imagine waving your arms back and forth 80 times per second while also rotating your hands 180 degrees at each end. That's 160 hand rotations per second! Even Olympic swimmers, who have among the fastest arm movements of any athletes, only complete about 1.5 arm cycles per second.</div>",
              "exercise_questions": [
                {"type": "single_select", "id": "hb-hover-q1", "question": "A slow-motion video of a hovering hummingbird shows wing tip positions. When connected, what shape would these positions form?", "correct_answer": "A figure-8 or horizontal oval pattern", "all_answers": ["A simple circle", "A figure-8 or horizontal oval pattern", "A triangle", "A straight vertical line (up and down)"]},
                {"type": "multiple_select", "id": "hb-hover-q2", "question": "A physicist analyzing hummingbird flight measures lift force during each wing stroke phase. During which phases should significant lift be detected?", "correct_answers": ["During the forward stroke", "During the backward stroke"], "all_answers": ["During the forward stroke", "During the backward stroke", "Neither phase produces lift", "Only when changing direction"]},
                {"type": "single_select", "id": "hb-hover-q3", "question": "An animator creating a realistic hummingbird hovering animation asks: what must happen to the wing at the end of each forward and backward stroke?", "correct_answer": "The wing must rotate 180 degrees to keep the leading edge forward", "all_answers": ["The wing should stop completely before reversing", "The wing must rotate 180 degrees to keep the leading edge forward", "The wing should fold against the body momentarily", "Nothing special - it just reverses direction"]}
              ]
            },
            {
              "source_id": "hb-aerial-maneuvers",
              "title": "Aerial Maneuvers",
              "learning_objective_indices": [4, 5],
              "content": "<p>Beyond hovering, hummingbirds can perform aerial maneuvers that no other bird can match. Their flight abilities have been described as 'helicopter-like,' but they actually exceed helicopter capabilities in several ways.</p><svg viewBox=\"0 0 400 300\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"300\" rx=\"8\"/><text x=\"200\" y=\"25\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"#333\">Multi-Directional Flight Capability</text><circle cx=\"200\" cy=\"150\" r=\"25\" fill=\"#27ae60\" stroke=\"#1e8449\" stroke-width=\"2\"/><text x=\"200\" y=\"155\" text-anchor=\"middle\" font-size=\"10\" fill=\"white\">Hover</text><path d=\"M200,110 L200,60\" stroke=\"#e74c3c\" stroke-width=\"4\" marker-end=\"url(#arrowUp)\"/><text x=\"200\" y=\"50\" text-anchor=\"middle\" font-size=\"10\" fill=\"#e74c3c\">Up</text><path d=\"M200,190 L200,240\" stroke=\"#e74c3c\" stroke-width=\"4\" marker-end=\"url(#arrowDown)\"/><text x=\"200\" y=\"260\" text-anchor=\"middle\" font-size=\"10\" fill=\"#e74c3c\">Down</text><path d=\"M230,150 L290,150\" stroke=\"#3498db\" stroke-width=\"4\" marker-end=\"url(#arrowRight)\"/><text x=\"320\" y=\"155\" font-size=\"10\" fill=\"#3498db\">Forward</text><text x=\"320\" y=\"167\" font-size=\"8\" fill=\"#666\">35 mph</text><path d=\"M170,150 L110,150\" stroke=\"#9b59b6\" stroke-width=\"4\" marker-end=\"url(#arrowLeft)\"/><text x=\"70\" y=\"155\" font-size=\"10\" fill=\"#9b59b6\">Backward!</text><text x=\"70\" y=\"167\" font-size=\"8\" fill=\"#666\">(unique)</text><path d=\"M225,130 L265,90\" stroke=\"#f39c12\" stroke-width=\"3\" marker-end=\"url(#arrowDiag)\"/><path d=\"M175,170 L135,210\" stroke=\"#f39c12\" stroke-width=\"3\" marker-end=\"url(#arrowDiag)\"/><text x=\"280\" y=\"75\" font-size=\"9\" fill=\"#f39c12\">Diagonal</text><text x=\"115\" y=\"230\" font-size=\"9\" fill=\"#f39c12\">Any angle</text><defs><marker id=\"arrowUp\" markerWidth=\"8\" markerHeight=\"8\" refX=\"4\" refY=\"8\" orient=\"auto\"><path d=\"M0,8 L4,0 L8,8 Z\" fill=\"#e74c3c\"/></marker><marker id=\"arrowDown\" markerWidth=\"8\" markerHeight=\"8\" refX=\"4\" refY=\"0\" orient=\"auto\"><path d=\"M0,0 L4,8 L8,0 Z\" fill=\"#e74c3c\"/></marker><marker id=\"arrowRight\" markerWidth=\"8\" markerHeight=\"8\" refX=\"8\" refY=\"4\" orient=\"auto\"><path d=\"M0,0 L8,4 L0,8 Z\" fill=\"#3498db\"/></marker><marker id=\"arrowLeft\" markerWidth=\"8\" markerHeight=\"8\" refX=\"0\" refY=\"4\" orient=\"auto\"><path d=\"M8,0 L0,4 L8,8 Z\" fill=\"#9b59b6\"/></marker><marker id=\"arrowDiag\" markerWidth=\"8\" markerHeight=\"8\" refX=\"6\" refY=\"4\" orient=\"auto\"><path d=\"M0,0 L8,4 L0,8 Z\" fill=\"#f39c12\"/></marker></defs><rect x=\"50\" y=\"270\" width=\"300\" height=\"20\" fill=\"#fce4ec\" stroke=\"#c2185b\" rx=\"3\"/><text x=\"200\" y=\"284\" text-anchor=\"middle\" font-size=\"9\" fill=\"#c2185b\">+ Brief upside-down flight for escapes!</text></svg><h2>Directional Flight</h2><p>Hummingbirds can fly in any direction:</p><ul><li><strong>Forward:</strong> Normal flight at speeds up to 30-35 mph</li><li><strong>Backward:</strong> The only birds capable of sustained backward flight</li><li><strong>Sideways:</strong> Easy lateral movement in any direction</li><li><strong>Upside down:</strong> Brief inverted flight, typically during escape maneuvers</li></ul><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> Hummingbirds can perform an instant 180-degree turn in less than 0.01 seconds - faster than the blink of a human eye! This escape reflex is so fast that predators like praying mantises and dragonflies, which also have extremely fast reflexes, still usually miss when striking at hummingbirds.</div><h2>How Backward Flight Works</h2><p>Backward flight is achieved by tilting the wing stroke plane backward rather than forward. The wing still traces its figure-8 pattern, but the orientation directs thrust backward (pushing the bird in reverse). The tail helps with stability during this unusual maneuver.</p><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Species Spotlight: Costa's Hummingbird</strong><br/>Male Costa's Hummingbirds (Calypte costae) of the Sonoran Desert perform one of the most extreme courtship dives. They climb to over 100 feet, then plummet at 60+ mph, pulling up with forces of 9g - more than fighter pilots experience! The dive produces a high-pitched whistle from their tail feathers, tuned to frequencies that female Costa's find most attractive.</div><h2>Courtship Dives</h2><p>Male hummingbirds perform spectacular dive displays:</p><ul><li>Climb to 60-130 feet in height</li><li>Power dive reaching speeds of 60+ mph</li><li>Pull up with forces exceeding 9g (more than fighter pilots experience)</li><li>Produce sounds with tail feathers during the dive</li></ul><h2>Escape Maneuvers</h2><p>When threatened, hummingbirds can execute instant direction changes that would destroy a mechanical aircraft. They can accelerate from zero to 30 mph in less than a meter, or reverse direction almost instantaneously. Their reaction time is among the fastest in the animal kingdom.</p><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Human Comparison:</strong> Fighter pilots wear special G-suits and train extensively to handle 9g forces for a few seconds - and they still sometimes black out. At 9g, a 150-pound person feels like they weigh 1,350 pounds. A hummingbird experiences these forces during every courtship dive, multiple times per day, with no ill effects!</div>",
              "exercise_questions": [
                {"type": "multiple_select", "id": "hb-maneuver-q1", "question": "A drone engineer wants to match hummingbird maneuverability. Which flight directions must the drone achieve to equal hummingbird capability?", "correct_answers": ["Forward flight", "Backward flight", "Sideways/lateral flight"], "all_answers": ["Forward flight", "Backward flight", "Sideways/lateral flight", "Forward only (like most drones)"]},
                {"type": "single_select", "id": "hb-maneuver-q2", "question": "A sports scientist studying extreme accelerations compares a hummingbird courtship dive to human activities. At what speed does the hummingbird dive?", "correct_answer": "60+ mph, faster than most highway speed limits", "all_answers": ["20 mph, like a slow bicycle", "40 mph, like urban driving", "60+ mph, faster than most highway speed limits", "100 mph, like a race car"]},
                {"type": "single_select", "id": "hb-maneuver-q3", "question": "A videographer films a hummingbird flying backward away from a flower. What is the bird doing to achieve this unique maneuver?", "correct_answer": "Tilting the wing stroke plane backward to redirect thrust", "all_answers": ["Flying in tight circles", "Using only the tail as a propeller", "Tilting the wing stroke plane backward to redirect thrust", "This was video editing - birds can't fly backward"]}
              ]
            }
          ],
          "prepost_questions": [
            {"id": "hb-flight-pp-1a", "variant": "A", "lo_index": 0, "type": "single_select", "question": "Which feathers make up most of the wing length?", "correct_answer": "Primaries", "all_answers": ["Primaries", "Secondaries", "Coverts", "Down feathers"]},
            {"id": "hb-flight-pp-1b", "variant": "B", "lo_index": 0, "type": "single_select", "question": "Hummingbird wings function most similarly to what?", "correct_answer": "Insect wings or helicopter blades", "all_answers": ["Eagle wings", "Insect wings or helicopter blades", "Bat wings", "Fish fins"]},
            {"id": "hb-flight-pp-2a", "variant": "A", "lo_index": 1, "type": "single_select", "question": "How many degrees can hummingbird wings rotate?", "correct_answer": "180 degrees", "all_answers": ["45 degrees", "90 degrees", "180 degrees", "360 degrees"]},
            {"id": "hb-flight-pp-2b", "variant": "B", "lo_index": 1, "type": "single_select", "question": "What enables the extreme wing rotation?", "correct_answer": "Ball-and-socket shoulder joint", "all_answers": ["Ball-and-socket shoulder joint", "Extra wing bones", "Longer feathers", "Flexible spine"]},
            {"id": "hb-flight-pp-3a", "variant": "A", "lo_index": 2, "type": "single_select", "question": "What pattern do wings trace during hovering?", "correct_answer": "Figure-8 (horizontal oval)", "all_answers": ["Circle", "Figure-8 (horizontal oval)", "Up and down", "Random"]},
            {"id": "hb-flight-pp-3b", "variant": "B", "lo_index": 2, "type": "single_select", "question": "Can any other bird truly hover in still air?", "correct_answer": "No, only hummingbirds", "all_answers": ["No, only hummingbirds", "Yes, eagles", "Yes, all birds", "Yes, kingfishers without wind"]},
            {"id": "hb-flight-pp-4a", "variant": "A", "lo_index": 3, "type": "single_select", "question": "On how many strokes do hummingbirds generate lift?", "correct_answer": "Both forward and backward strokes", "all_answers": ["Downstroke only", "Upstroke only", "Both forward and backward strokes", "Neither"]},
            {"id": "hb-flight-pp-4b", "variant": "B", "lo_index": 3, "type": "single_select", "question": "How does lift compare between strokes?", "correct_answer": "About 50% from each", "all_answers": ["Downstroke is much stronger", "Upstroke is much stronger", "About 50% from each", "No lift on either"]},
            {"id": "hb-flight-pp-5a", "variant": "A", "lo_index": 4, "type": "single_select", "question": "Can hummingbirds fly upside down?", "correct_answer": "Yes, briefly for escape maneuvers", "all_answers": ["No", "Yes, briefly for escape maneuvers", "Yes, for long periods", "Only during sleep"]},
            {"id": "hb-flight-pp-5b", "variant": "B", "lo_index": 4, "type": "single_select", "question": "What is the forward flight top speed?", "correct_answer": "30-35 mph", "all_answers": ["10 mph", "20 mph", "30-35 mph", "60+ mph"]},
            {"id": "hb-flight-pp-6a", "variant": "A", "lo_index": 5, "type": "single_select", "question": "How do hummingbirds achieve backward flight?", "correct_answer": "Tilting the wing stroke plane backward", "all_answers": ["Tilting the wing stroke plane backward", "Flying in circles", "Using tail as rudder only", "They cannot fly backward"]},
            {"id": "hb-flight-pp-6b", "variant": "B", "lo_index": 5, "type": "single_select", "question": "What G-forces do hummingbirds experience in courtship dives?", "correct_answer": "Over 9g", "all_answers": ["1-2g", "3-4g", "Over 9g", "No G-forces"]}
          ]
        }
      ]
    },
    {
      "source_id": "intro-computing",
      "title": "Introductory Computing",
      "description": "Learn fundamental programming concepts",
      "units": [
        {
          "source_id": "cs-data-variables",
          "title": "Data & Variables",
          "description": "Understand how computers store and manipulate information",
          "learning_objectives": [
            "Define what data means in computing",
            "Identify different types of data",
            "Explain the purpose of variables",
            "Describe how to declare and assign variables",
            "List common data operations",
            "Apply arithmetic operations to numeric data"
          ],
          "lessons": [
            {
              "source_id": "cs-what-is-data",
              "title": "What is Data?",
              "learning_objective_indices": [0, 1],
              "content": "<p>At its core, computing is about processing data - transforming information from one form into another, analyzing it, storing it, and presenting it in useful ways. Before we can write programs, we need to understand what data actually is.</p><svg viewBox=\"0 0 400 250\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"250\" rx=\"8\"/><text x=\"200\" y=\"25\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"#333\">Common Data Types</text><rect x=\"20\" y=\"45\" width=\"85\" height=\"70\" fill=\"#e3f2fd\" stroke=\"#1565c0\" stroke-width=\"2\" rx=\"5\"/><text x=\"62\" y=\"65\" text-anchor=\"middle\" font-size=\"10\" font-weight=\"bold\" fill=\"#1565c0\">Integer</text><text x=\"62\" y=\"85\" text-anchor=\"middle\" font-size=\"16\" fill=\"#1565c0\">42</text><text x=\"62\" y=\"105\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">Whole numbers</text><rect x=\"115\" y=\"45\" width=\"85\" height=\"70\" fill=\"#e8f5e9\" stroke=\"#2e7d32\" stroke-width=\"2\" rx=\"5\"/><text x=\"157\" y=\"65\" text-anchor=\"middle\" font-size=\"10\" font-weight=\"bold\" fill=\"#2e7d32\">Float</text><text x=\"157\" y=\"85\" text-anchor=\"middle\" font-size=\"16\" fill=\"#2e7d32\">3.14</text><text x=\"157\" y=\"105\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">Decimals</text><rect x=\"210\" y=\"45\" width=\"85\" height=\"70\" fill=\"#fff3e0\" stroke=\"#e65100\" stroke-width=\"2\" rx=\"5\"/><text x=\"252\" y=\"65\" text-anchor=\"middle\" font-size=\"10\" font-weight=\"bold\" fill=\"#e65100\">String</text><text x=\"252\" y=\"85\" text-anchor=\"middle\" font-size=\"14\" fill=\"#e65100\">\"Hello\"</text><text x=\"252\" y=\"105\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">Text in quotes</text><rect x=\"305\" y=\"45\" width=\"75\" height=\"70\" fill=\"#fce4ec\" stroke=\"#c2185b\" stroke-width=\"2\" rx=\"5\"/><text x=\"342\" y=\"65\" text-anchor=\"middle\" font-size=\"10\" font-weight=\"bold\" fill=\"#c2185b\">Boolean</text><text x=\"342\" y=\"85\" text-anchor=\"middle\" font-size=\"14\" fill=\"#c2185b\">True</text><text x=\"342\" y=\"105\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">True/False</text><rect x=\"20\" y=\"130\" width=\"360\" height=\"50\" fill=\"#f3e5f5\" stroke=\"#7b1fa2\" rx=\"5\"/><text x=\"200\" y=\"150\" text-anchor=\"middle\" font-size=\"11\" fill=\"#7b1fa2\">All data is stored as binary (1s and 0s)</text><text x=\"200\" y=\"170\" text-anchor=\"middle\" font-size=\"20\" font-family=\"monospace\" fill=\"#7b1fa2\">01001000 01101001</text><text x=\"200\" y=\"195\" text-anchor=\"middle\" font-size=\"9\" fill=\"#666\">Above: \"Hi\" in binary (8 bits per character)</text><rect x=\"50\" y=\"210\" width=\"300\" height=\"30\" fill=\"#e0e0e0\" stroke=\"#757575\" rx=\"3\"/><text x=\"200\" y=\"230\" text-anchor=\"middle\" font-size=\"10\" fill=\"#424242\">Data Types = high-level abstractions over binary</text></svg><h2>Data: Information for Computers</h2><p>Data is any information that a computer can store and process. This incredibly broad definition encompasses:</p><ul><li>Numbers (your age, a price, a distance)</li><li>Text (a name, a message, a book)</li><li>Images (photographs, drawings, icons)</li><li>Audio (music, voice recordings, sound effects)</li><li>Video (movies, animations, video calls)</li><li>And much more...</li></ul><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> A single 4K video frame contains about 25 million pixels, each with color data. At 60 frames per second, that's 1.5 billion pieces of data every second! Modern computers process this in real-time while you watch YouTube.</div><h2>Binary: The Language of Computers</h2><p>While humans think in decimal (base 10) and communicate with complex languages, computers fundamentally work in binary - just 1s and 0s. Every piece of data, no matter how complex, is ultimately represented as sequences of these binary digits (bits).</p><p>However, programming would be impossibly tedious if we had to work directly in binary. Instead, programming languages provide higher-level abstractions called data types.</p><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Real-World Application: Video Games</strong><br/>When you play a video game, the computer tracks thousands of variables: your position (floats like 123.45, 67.89), your health (integer like 85), your character name (string like \"DragonSlayer99\"), and whether you're jumping (boolean True/False). Every frame, these get updated 60+ times per second!</div><h2>Common Data Types</h2><p>Programming languages categorize data into types, each with its own properties and operations:</p><ul><li><strong>Integers:</strong> Whole numbers like 42, -17, or 0</li><li><strong>Floating-point numbers:</strong> Decimal numbers like 3.14, -0.001, or 2.0</li><li><strong>Strings:</strong> Text enclosed in quotes, like \"Hello\" or 'World'</li><li><strong>Booleans:</strong> True/False values used for logic and decisions</li></ul><p>Understanding data types is essential because operations that work on one type might not work on another - you can add numbers, but what does it mean to divide text?</p><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Try It Yourself:</strong><pre style=\"background:#263238;color:#aed581;padding:0.5em;border-radius:4px;font-family:monospace\">age = 25              # integer\nprice = 19.99         # float\nname = \"Alice\"        # string\nis_student = True     # boolean\nprint(type(age))      # Shows: &lt;class 'int'&gt;</pre></div>",
              "exercise_questions": [
                {"type": "single_select", "id": "cs-data-q1", "question": "A computer scientist explains that your MP3 files, photos, and documents are all stored the same way at the hardware level. What format is that?", "correct_answer": "Binary - sequences of 1s and 0s", "all_answers": ["Binary - sequences of 1s and 0s", "Alphabetic letters", "RGB colors", "Analog sound waves"]},
                {"type": "multiple_select", "id": "cs-data-q2", "question": "You're building a student database. Which programming data types would you need to store: name, age, GPA, and graduation status?", "correct_answers": ["String for the name", "Integer for the age", "Boolean for graduation status"], "all_answers": ["String for the name", "Integer for the age", "Boolean for graduation status", "Emotion for happiness level"]},
                {"type": "single_select", "id": "cs-data-q3", "question": "A login system needs to track whether a user is currently logged in. What data type best represents this on/off state?", "correct_answer": "Boolean (True/False)", "all_answers": ["Integer", "String", "Boolean (True/False)", "Float"]}
              ]
            },
            {
              "source_id": "cs-variables-types",
              "title": "Variables & Types",
              "learning_objective_indices": [2, 3],
              "content": "<p>If data is the information computers work with, variables are the containers that hold that data. Understanding variables is fundamental to programming - they're one of the first concepts every programmer learns.</p><svg viewBox=\"0 0 400 220\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"220\" rx=\"8\"/><text x=\"200\" y=\"25\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"#333\">Variables: Labeled Boxes for Data</text><rect x=\"50\" y=\"50\" width=\"100\" height=\"80\" fill=\"#e3f2fd\" stroke=\"#1565c0\" stroke-width=\"2\" rx=\"5\"/><rect x=\"50\" y=\"40\" width=\"100\" height=\"20\" fill=\"#1565c0\" rx=\"3\"/><text x=\"100\" y=\"55\" text-anchor=\"middle\" font-size=\"10\" fill=\"white\">player_score</text><text x=\"100\" y=\"100\" text-anchor=\"middle\" font-size=\"24\" fill=\"#1565c0\">42</text><rect x=\"170\" y=\"50\" width=\"100\" height=\"80\" fill=\"#e8f5e9\" stroke=\"#2e7d32\" stroke-width=\"2\" rx=\"5\"/><rect x=\"170\" y=\"40\" width=\"100\" height=\"20\" fill=\"#2e7d32\" rx=\"3\"/><text x=\"220\" y=\"55\" text-anchor=\"middle\" font-size=\"10\" fill=\"white\">user_name</text><text x=\"220\" y=\"100\" text-anchor=\"middle\" font-size=\"16\" fill=\"#2e7d32\">\"Alice\"</text><rect x=\"290\" y=\"50\" width=\"80\" height=\"80\" fill=\"#fce4ec\" stroke=\"#c2185b\" stroke-width=\"2\" rx=\"5\"/><rect x=\"290\" y=\"40\" width=\"80\" height=\"20\" fill=\"#c2185b\" rx=\"3\"/><text x=\"330\" y=\"55\" text-anchor=\"middle\" font-size=\"10\" fill=\"white\">is_active</text><text x=\"330\" y=\"100\" text-anchor=\"middle\" font-size=\"16\" fill=\"#c2185b\">True</text><text x=\"60\" y=\"150\" font-size=\"10\" fill=\"#666\">name = label</text><text x=\"60\" y=\"165\" font-size=\"10\" fill=\"#666\">value = contents</text><rect x=\"180\" y=\"150\" width=\"200\" height=\"55\" fill=\"#fff3e0\" stroke=\"#e65100\" rx=\"5\"/><text x=\"280\" y=\"170\" text-anchor=\"middle\" font-size=\"10\" fill=\"#e65100\">player_score = 42</text><text x=\"280\" y=\"190\" text-anchor=\"middle\" font-size=\"9\" fill=\"#666\">\"Put 42 in the box labeled player_score\"</text></svg><h2>What is a Variable?</h2><p>A variable is a named storage location in the computer's memory. Think of it like a labeled box:</p><ul><li>The label is the variable's name</li><li>The contents are the variable's value</li><li>You can look inside (read the value)</li><li>You can change what's inside (update the value)</li></ul><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> The term \"variable\" comes from mathematics, but programming variables work differently. In math, x = 5 is a statement of equality. In programming, x = 5 is a command: \"store 5 in the box labeled x.\"</div><h2>Declaring and Assigning Variables</h2><p>In most programming languages, you create and use variables in two steps:</p><ol><li><strong>Declaration:</strong> Telling the computer you want a variable with a specific name</li><li><strong>Assignment:</strong> Putting a value into that variable</li></ol><p>In Python, these often happen together:</p><pre>age = 25           # Creates 'age' and assigns 25\nname = \"Alice\"     # Creates 'name' and assigns \"Alice\"\nis_student = True  # Creates 'is_student' and assigns True</pre><p>The equals sign (=) is the assignment operator - it puts the value on the right into the variable on the left.</p><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Real-World Application: Shopping Cart</strong><br/>Online stores use variables constantly:<pre style=\"background:#263238;color:#aed581;padding:0.5em;border-radius:4px;font-family:monospace\">cart_total = 0.00\nitem_count = 0\nuser_logged_in = False\ndiscount_code = \"SAVE20\"</pre>As you shop, these variables update with every action you take.</div><h2>Naming Variables</h2><p>Good variable names make code readable:</p><ul><li>Use descriptive names: <code>user_age</code> not <code>x</code></li><li>Follow conventions: most languages use lowercase with underscores or camelCase</li><li>Avoid reserved words: don't name a variable <code>if</code> or <code>while</code></li></ul><h2>Variables Can Change</h2><p>Unlike mathematical variables, programming variables can be reassigned:</p><pre>count = 0      # count is 0\ncount = 1      # count is now 1\ncount = 2      # count is now 2</pre><p>This ability to change is what makes programs dynamic and useful.</p><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Try It Yourself:</strong><pre style=\"background:#263238;color:#aed581;padding:0.5em;border-radius:4px;font-family:monospace\"># Watch a variable change\nlives = 3\nprint(\"Starting lives:\", lives)  # 3\nlives = lives - 1\nprint(\"After hit:\", lives)       # 2</pre></div>",
              "exercise_questions": [
                {"type": "single_select", "id": "cs-var-q1", "question": "A game developer needs to track a player's current health points, which changes as the player takes damage or heals. What programming concept should they use?", "correct_answer": "A variable (named container that can change)", "all_answers": ["A variable (named container that can change)", "A new computer each time", "A mathematical equation", "A different programming language"]},
                {"type": "single_select", "id": "cs-var-q2", "question": "Looking at this code: `high_score = 5000`, which part identifies WHERE the value is stored?", "correct_answer": "high_score (the variable name)", "all_answers": ["5000 (the number)", "high_score (the variable name)", "integer (the data type)", "= (the equals sign)"]},
                {"type": "single_select", "id": "cs-var-q3", "question": "A programmer writes `temperature = 72`. Later they write `temperature = 85`. What happened?", "correct_answer": "The old value (72) was replaced with the new value (85)", "all_answers": ["The code tested if temperature equals 72", "The old value (72) was replaced with the new value (85)", "An error occurred - variables can't change", "Two separate variables were created"]}
              ]
            },
            {
              "source_id": "cs-operations-data",
              "title": "Operations on Data",
              "learning_objective_indices": [4, 5],
              "content": "<p>Data becomes useful when we operate on it - when we calculate, compare, combine, and transform. Programming languages provide operators and functions for these operations.</p><svg viewBox=\"0 0 400 280\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"280\" rx=\"8\"/><text x=\"200\" y=\"25\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"#333\">Python Arithmetic Operators</text><rect x=\"20\" y=\"45\" width=\"80\" height=\"50\" fill=\"#e3f2fd\" stroke=\"#1565c0\" stroke-width=\"2\" rx=\"5\"/><text x=\"60\" y=\"70\" text-anchor=\"middle\" font-size=\"20\" fill=\"#1565c0\">+</text><text x=\"60\" y=\"88\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">5 + 3 = 8</text><rect x=\"110\" y=\"45\" width=\"80\" height=\"50\" fill=\"#e8f5e9\" stroke=\"#2e7d32\" stroke-width=\"2\" rx=\"5\"/><text x=\"150\" y=\"70\" text-anchor=\"middle\" font-size=\"20\" fill=\"#2e7d32\">-</text><text x=\"150\" y=\"88\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">10 - 4 = 6</text><rect x=\"200\" y=\"45\" width=\"80\" height=\"50\" fill=\"#fff3e0\" stroke=\"#e65100\" stroke-width=\"2\" rx=\"5\"/><text x=\"240\" y=\"70\" text-anchor=\"middle\" font-size=\"20\" fill=\"#e65100\">*</text><text x=\"240\" y=\"88\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">4 * 7 = 28</text><rect x=\"290\" y=\"45\" width=\"90\" height=\"50\" fill=\"#fce4ec\" stroke=\"#c2185b\" stroke-width=\"2\" rx=\"5\"/><text x=\"335\" y=\"70\" text-anchor=\"middle\" font-size=\"20\" fill=\"#c2185b\">/</text><text x=\"335\" y=\"88\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">15 / 3 = 5.0</text><rect x=\"20\" y=\"105\" width=\"115\" height=\"50\" fill=\"#f3e5f5\" stroke=\"#7b1fa2\" stroke-width=\"2\" rx=\"5\"/><text x=\"77\" y=\"130\" text-anchor=\"middle\" font-size=\"16\" fill=\"#7b1fa2\">//</text><text x=\"77\" y=\"148\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">17 // 5 = 3 (floor)</text><rect x=\"145\" y=\"105\" width=\"115\" height=\"50\" fill=\"#e0f2f1\" stroke=\"#00695c\" stroke-width=\"2\" rx=\"5\"/><text x=\"202\" y=\"130\" text-anchor=\"middle\" font-size=\"16\" fill=\"#00695c\">%</text><text x=\"202\" y=\"148\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">17 % 5 = 2 (mod)</text><rect x=\"270\" y=\"105\" width=\"110\" height=\"50\" fill=\"#fff8e1\" stroke=\"#f9a825\" stroke-width=\"2\" rx=\"5\"/><text x=\"325\" y=\"130\" text-anchor=\"middle\" font-size=\"16\" fill=\"#f9a825\">**</text><text x=\"325\" y=\"148\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">2 ** 3 = 8 (power)</text><rect x=\"20\" y=\"170\" width=\"360\" height=\"45\" fill=\"#ffebee\" stroke=\"#c62828\" rx=\"5\"/><text x=\"200\" y=\"190\" text-anchor=\"middle\" font-size=\"11\" font-weight=\"bold\" fill=\"#c62828\">Order of Operations (PEMDAS)</text><text x=\"200\" y=\"207\" text-anchor=\"middle\" font-size=\"10\" fill=\"#666\">10 + 5 * 2 = 20 (not 30!) — multiply first</text><rect x=\"20\" y=\"225\" width=\"360\" height=\"45\" fill=\"#e8f5e9\" stroke=\"#2e7d32\" rx=\"5\"/><text x=\"200\" y=\"245\" text-anchor=\"middle\" font-size=\"11\" font-weight=\"bold\" fill=\"#2e7d32\">String Concatenation</text><text x=\"200\" y=\"262\" text-anchor=\"middle\" font-size=\"10\" fill=\"#666\">\"Hello\" + \" \" + \"World\" = \"Hello World\"</text></svg><h2>Arithmetic Operations</h2><p>The basic mathematical operations work as you'd expect:</p><ul><li><strong>Addition (+):</strong> <code>5 + 3</code> equals 8</li><li><strong>Subtraction (-):</strong> <code>10 - 4</code> equals 6</li><li><strong>Multiplication (*):</strong> <code>4 * 7</code> equals 28</li><li><strong>Division (/):</strong> <code>15 / 3</code> equals 5.0</li><li><strong>Integer division (//):</strong> <code>17 // 5</code> equals 3</li><li><strong>Modulo (%):</strong> <code>17 % 5</code> equals 2 (remainder)</li><li><strong>Exponentiation (**):</strong> <code>2 ** 3</code> equals 8</li></ul><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> The modulo operator (%) is secretly one of the most useful operators! It's used to check if numbers are even/odd, to make things wrap around (like clock arithmetic), and to create patterns in games. <code>17 % 2</code> equals 1, so 17 is odd!</div><h2>Order of Operations</h2><p>Just like in mathematics, operations follow a specific order (PEMDAS):</p><ol><li>Parentheses</li><li>Exponents</li><li>Multiplication and Division (left to right)</li><li>Addition and Subtraction (left to right)</li></ol><p>So <code>10 + 5 * 2</code> equals 20 (not 30), because multiplication happens first.</p><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Real-World Application: E-Commerce</strong><pre style=\"background:#263238;color:#aed581;padding:0.5em;border-radius:4px;font-family:monospace\">subtotal = price * quantity\ntax = subtotal * 0.08\nshipping = 5.99 if subtotal < 50 else 0\ntotal = subtotal + tax + shipping</pre>Every online checkout uses these exact operations!</div><h2>String Operations</h2><p>Strings have their own operations:</p><ul><li><strong>Concatenation (+):</strong> <code>\"Hello\" + \" \" + \"World\"</code> equals \"Hello World\"</li><li><strong>Repetition (*):</strong> <code>\"Ha\" * 3</code> equals \"HaHaHa\"</li><li><strong>Length:</strong> <code>len(\"Hello\")</code> equals 5</li></ul><h2>Comparison Operations</h2><p>These return Boolean (True/False) values:</p><ul><li><strong>Equal (==):</strong> <code>5 == 5</code> is True</li><li><strong>Not equal (!=):</strong> <code>5 != 3</code> is True</li><li><strong>Greater than (>):</strong> <code>7 > 4</code> is True</li><li><strong>Less than (<):</strong> <code>2 < 8</code> is True</li></ul><p>Note: == tests equality, = assigns values - confusing them is a common beginner mistake!</p><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Try It Yourself:</strong><pre style=\"background:#263238;color:#aed581;padding:0.5em;border-radius:4px;font-family:monospace\"># Calculate a tip\nmeal = 45.00\ntip_percent = 0.20\ntip = meal * tip_percent\nprint(\"Tip:\", tip)           # 9.0\nprint(\"Total:\", meal + tip)  # 54.0</pre></div>",
              "exercise_questions": [
                {"type": "multiple_select", "id": "cs-ops-q1", "question": "You're writing a calculator app. Which Python operators would you need to implement basic math functions?", "correct_answers": ["+ for addition", "- for subtraction", "* for multiplication", "/ for division"], "all_answers": ["+ for addition", "- for subtraction", "* for multiplication", "/ for division"]},
                {"type": "single_select", "id": "cs-ops-q2", "question": "A social media app creates usernames by combining first and last name: first_name + \"_\" + last_name. What is this string operation called?", "correct_answer": "Concatenation (joining strings)", "all_answers": ["Concatenation (joining strings)", "Deletion", "Comparison", "Sorting"]},
                {"type": "single_select", "id": "cs-ops-q3", "question": "A shopping cart calculates: base_price + shipping * item_count where base_price=10, shipping=5, item_count=2. What's the total due to order of operations?", "correct_answer": "20 (shipping * item_count happens first)", "all_answers": ["15", "20 (shipping * item_count happens first)", "30 (everything happens left to right)", "25"]}
              ]
            }
          ],
          "prepost_questions": [
            {"id": "cs-data-pp-1a", "variant": "A", "lo_index": 0, "type": "single_select", "question": "What is data in computing?", "correct_answer": "Information that computers can process", "all_answers": ["Information that computers can process", "Only numbers", "Only text", "Computer hardware"]},
            {"id": "cs-data-pp-1b", "variant": "B", "lo_index": 0, "type": "single_select", "question": "What does a computer process?", "correct_answer": "Data", "all_answers": ["Data", "Electricity only", "Nothing", "Physical objects"]},
            {"id": "cs-data-pp-2a", "variant": "A", "lo_index": 1, "type": "single_select", "question": "Which is a numeric data type?", "correct_answer": "Integer", "all_answers": ["Integer", "Boolean", "String", "List"]},
            {"id": "cs-data-pp-2b", "variant": "B", "lo_index": 1, "type": "single_select", "question": "What data type represents True/False?", "correct_answer": "Boolean", "all_answers": ["Integer", "String", "Boolean", "Float"]},
            {"id": "cs-data-pp-3a", "variant": "A", "lo_index": 2, "type": "single_select", "question": "Why do we use variables?", "correct_answer": "To store and reuse values", "all_answers": ["To store and reuse values", "To make code slower", "To confuse programmers", "Variables are not useful"]},
            {"id": "cs-data-pp-3b", "variant": "B", "lo_index": 2, "type": "single_select", "question": "What can a variable hold?", "correct_answer": "A value of some data type", "all_answers": ["A value of some data type", "Another computer", "Hardware components", "Nothing useful"]},
            {"id": "cs-data-pp-4a", "variant": "A", "lo_index": 3, "type": "single_select", "question": "What does 'x = 5' do?", "correct_answer": "Assigns 5 to variable x", "all_answers": ["Assigns 5 to variable x", "Tests if x equals 5", "Deletes x", "Prints 5"]},
            {"id": "cs-data-pp-4b", "variant": "B", "lo_index": 3, "type": "single_select", "question": "In 'name = \"Alice\"', what is \"Alice\"?", "correct_answer": "The value being assigned", "all_answers": ["The variable name", "The value being assigned", "An operator", "A function"]},
            {"id": "cs-data-pp-5a", "variant": "A", "lo_index": 4, "type": "single_select", "question": "What symbol represents multiplication?", "correct_answer": "*", "all_answers": ["+", "-", "*", "/"]},
            {"id": "cs-data-pp-5b", "variant": "B", "lo_index": 4, "type": "single_select", "question": "What does the % operator return?", "correct_answer": "The remainder of division", "all_answers": ["A percentage", "The remainder of division", "A ratio", "An error"]},
            {"id": "cs-data-pp-6a", "variant": "A", "lo_index": 5, "type": "single_select", "question": "What is 10 + 5 * 2?", "correct_answer": "20", "all_answers": ["15", "20", "30", "25"]},
            {"id": "cs-data-pp-6b", "variant": "B", "lo_index": 5, "type": "single_select", "question": "What is (10 + 5) * 2?", "correct_answer": "30", "all_answers": ["20", "25", "30", "35"]}
          ]
        },
        {
          "source_id": "cs-control-flow",
          "title": "Control Flow",
          "description": "Learn how to control program execution",
          "learning_objectives": [
            "Explain what conditional statements do",
            "Write simple if/else statements",
            "Describe the purpose of loops",
            "Differentiate between for and while loops",
            "Combine conditionals and loops",
            "Trace execution flow through nested structures"
          ],
          "lessons": [
            {
              "source_id": "cs-conditionals",
              "title": "Conditionals",
              "learning_objective_indices": [0, 1],
              "content": "<p>Real programs need to make decisions. Should we display an error message? Is the user old enough? Does the password match? Conditional statements let programs choose different paths based on conditions.</p><svg viewBox=\"0 0 400 250\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"250\" rx=\"8\"/><text x=\"200\" y=\"25\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"#333\">Decision Making with if/elif/else</text><circle cx=\"200\" cy=\"70\" r=\"25\" fill=\"#fff3e0\" stroke=\"#e65100\" stroke-width=\"2\"/><text x=\"200\" y=\"75\" text-anchor=\"middle\" font-size=\"10\" fill=\"#e65100\">Check</text><path d=\"M175,70 L100,120\" stroke=\"#4caf50\" stroke-width=\"2\" marker-end=\"url(#arrowYes)\"/><text x=\"120\" y=\"100\" font-size=\"10\" fill=\"#4caf50\">True</text><path d=\"M225,70 L300,120\" stroke=\"#f44336\" stroke-width=\"2\" marker-end=\"url(#arrowNo)\"/><text x=\"270\" y=\"100\" font-size=\"10\" fill=\"#f44336\">False</text><rect x=\"50\" y=\"120\" width=\"100\" height=\"40\" fill=\"#e8f5e9\" stroke=\"#4caf50\" stroke-width=\"2\" rx=\"5\"/><text x=\"100\" y=\"145\" text-anchor=\"middle\" font-size=\"10\" fill=\"#2e7d32\">if block runs</text><rect x=\"250\" y=\"120\" width=\"100\" height=\"40\" fill=\"#ffebee\" stroke=\"#f44336\" stroke-width=\"2\" rx=\"5\"/><text x=\"300\" y=\"145\" text-anchor=\"middle\" font-size=\"10\" fill=\"#c62828\">else block runs</text><defs><marker id=\"arrowYes\" markerWidth=\"8\" markerHeight=\"8\" refX=\"6\" refY=\"4\" orient=\"auto\"><path d=\"M0,0 L8,4 L0,8 Z\" fill=\"#4caf50\"/></marker><marker id=\"arrowNo\" markerWidth=\"8\" markerHeight=\"8\" refX=\"6\" refY=\"4\" orient=\"auto\"><path d=\"M0,0 L8,4 L0,8 Z\" fill=\"#f44336\"/></marker></defs><rect x=\"20\" y=\"180\" width=\"360\" height=\"55\" fill=\"#e3f2fd\" stroke=\"#1565c0\" rx=\"5\"/><text x=\"200\" y=\"200\" text-anchor=\"middle\" font-size=\"10\" font-family=\"monospace\" fill=\"#1565c0\">if score >= 90: grade = \"A\"</text><text x=\"200\" y=\"215\" text-anchor=\"middle\" font-size=\"10\" font-family=\"monospace\" fill=\"#1565c0\">elif score >= 80: grade = \"B\"</text><text x=\"200\" y=\"230\" text-anchor=\"middle\" font-size=\"10\" font-family=\"monospace\" fill=\"#1565c0\">else: grade = \"F\"</text></svg><h2>The if Statement</h2><p>The fundamental conditional is the if statement. Its basic form:</p><pre>if condition:\n    # code to run if condition is True\n    do_something()</pre><p>The code inside the if block only runs when the condition evaluates to True. If it's False, that code is skipped entirely.</p><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> Every time you unlock your phone, dozens of if statements run: Is the fingerprint valid? Is the PIN correct? Is Face ID recognized? Should notifications be shown? Conditionals are the backbone of all interactive software!</div><h2>Adding else</h2><p>Often we want to do one thing if a condition is true and something different if it's false:</p><pre>if temperature > 30:\n    print(\"It's hot!\")\nelse:\n    print(\"It's not too hot.\")</pre><p>The else block runs when the if condition is False.</p><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Real-World Application: Login System</strong><pre style=\"background:#263238;color:#aed581;padding:0.5em;border-radius:4px;font-family:monospace\">if password == stored_password:\n    print(\"Welcome back!\")\n    show_dashboard()\nelse:\n    print(\"Invalid password\")\n    attempts += 1</pre>Every website login uses this exact pattern!</div><h2>Multiple Conditions with elif</h2><p>For more than two possibilities, use elif (else if):</p><pre>if score >= 90:\n    grade = \"A\"\nelif score >= 80:\n    grade = \"B\"\nelif score >= 70:\n    grade = \"C\"\nelse:\n    grade = \"F\"</pre><p>Python checks each condition in order and runs the first matching block.</p><h2>Boolean Expressions</h2><p>Conditions are Boolean expressions - they evaluate to True or False:</p><ul><li><strong>Comparison:</strong> ==, !=, <, >, <=, >=</li><li><strong>Logical:</strong> and, or, not</li></ul><p>Example: <code>if age >= 18 and has_license:</code></p><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Try It Yourself:</strong><pre style=\"background:#263238;color:#aed581;padding:0.5em;border-radius:4px;font-family:monospace\"># A simple recommendation engine\nmood = \"happy\"\nweather = \"sunny\"\n\nif mood == \"happy\" and weather == \"sunny\":\n    print(\"Perfect day for a picnic!\")\nelif mood == \"tired\":\n    print(\"Maybe get some rest?\")\nelse:\n    print(\"How about a movie?\")</pre></div>",
              "exercise_questions": [
                {"type": "single_select", "id": "cs-cond-q1", "question": "A login system should show 'Welcome!' only when the password is correct. What programming concept should the developer use?", "correct_answer": "An if statement that checks if password matches", "all_answers": ["An if statement that checks if password matches", "A loop that repeats the welcome message", "A variable called 'welcome'", "A print statement at the start"]},
                {"type": "single_select", "id": "cs-cond-q2", "question": "A weather app shows 'Bring an umbrella!' if it's raining, otherwise shows 'Enjoy the sun!'. When does the 'Enjoy the sun!' message display?", "correct_answer": "When the 'if raining' condition is False", "all_answers": ["When the 'if raining' condition is True", "When the 'if raining' condition is False", "Always, regardless of weather", "Never - it's broken code"]},
                {"type": "single_select", "id": "cs-cond-q3", "question": "A grading system needs to assign A, B, C, D, or F based on score. A developer uses 'if' for A, then multiple '____' for B, C, D, and 'else' for F. What goes in the blank?", "correct_answer": "elif (else if)", "all_answers": ["elif (else if)", "elseloop", "element", "errorif"]}
              ]
            },
            {
              "source_id": "cs-loops",
              "title": "Loops",
              "learning_objective_indices": [2, 3],
              "content": "<p>Loops are one of programming's most powerful tools. They let us repeat actions without writing the same code over and over. Need to process 1,000 files? A loop handles it as easily as processing one.</p><svg viewBox=\"0 0 400 250\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"250\" rx=\"8\"/><text x=\"200\" y=\"25\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"#333\">For Loop vs While Loop</text><rect x=\"20\" y=\"45\" width=\"170\" height=\"90\" fill=\"#e3f2fd\" stroke=\"#1565c0\" stroke-width=\"2\" rx=\"5\"/><text x=\"105\" y=\"65\" text-anchor=\"middle\" font-size=\"12\" font-weight=\"bold\" fill=\"#1565c0\">for loop</text><text x=\"105\" y=\"85\" text-anchor=\"middle\" font-size=\"9\" fill=\"#333\">for i in range(5):</text><text x=\"105\" y=\"100\" text-anchor=\"middle\" font-size=\"9\" fill=\"#333\">Known iterations</text><text x=\"105\" y=\"115\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">\"Do this exactly 5 times\"</text><text x=\"105\" y=\"130\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">\"Process each item\"</text><rect x=\"210\" y=\"45\" width=\"170\" height=\"90\" fill=\"#e8f5e9\" stroke=\"#2e7d32\" stroke-width=\"2\" rx=\"5\"/><text x=\"295\" y=\"65\" text-anchor=\"middle\" font-size=\"12\" font-weight=\"bold\" fill=\"#2e7d32\">while loop</text><text x=\"295\" y=\"85\" text-anchor=\"middle\" font-size=\"9\" fill=\"#333\">while count < 5:</text><text x=\"295\" y=\"100\" text-anchor=\"middle\" font-size=\"9\" fill=\"#333\">Unknown iterations</text><text x=\"295\" y=\"115\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">\"Keep going until done\"</text><text x=\"295\" y=\"130\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">\"Wait for user input\"</text><rect x=\"20\" y=\"150\" width=\"360\" height=\"85\" fill=\"#fff3e0\" stroke=\"#e65100\" rx=\"5\"/><text x=\"200\" y=\"170\" text-anchor=\"middle\" font-size=\"11\" font-weight=\"bold\" fill=\"#e65100\">Loop Flow</text><circle cx=\"60\" cy=\"200\" r=\"15\" fill=\"#fff\" stroke=\"#e65100\" stroke-width=\"2\"/><text x=\"60\" y=\"205\" text-anchor=\"middle\" font-size=\"8\" fill=\"#e65100\">Start</text><path d=\"M75,200 L110,200\" stroke=\"#e65100\" stroke-width=\"2\" marker-end=\"url(#arr)\"/><circle cx=\"140\" cy=\"200\" r=\"20\" fill=\"#fff\" stroke=\"#e65100\" stroke-width=\"2\"/><text x=\"140\" y=\"203\" text-anchor=\"middle\" font-size=\"7\" fill=\"#e65100\">Check?</text><path d=\"M160,200 L200,200\" stroke=\"#4caf50\" stroke-width=\"2\" marker-end=\"url(#arr)\"/><text x=\"180\" y=\"195\" font-size=\"7\" fill=\"#4caf50\">yes</text><rect x=\"200\" y=\"185\" width=\"50\" height=\"30\" fill=\"#e8f5e9\" stroke=\"#4caf50\" rx=\"3\"/><text x=\"225\" y=\"205\" text-anchor=\"middle\" font-size=\"8\" fill=\"#2e7d32\">Do it</text><path d=\"M225,215 L225,225 L140,225 L140,220\" stroke=\"#4caf50\" stroke-width=\"2\" marker-end=\"url(#arr)\"/><path d=\"M140,180 L140,160 L310,160 L310,200\" stroke=\"#f44336\" stroke-width=\"2\" marker-end=\"url(#arr)\"/><text x=\"230\" y=\"155\" font-size=\"7\" fill=\"#f44336\">no → exit</text><circle cx=\"340\" cy=\"200\" r=\"15\" fill=\"#fff\" stroke=\"#f44336\" stroke-width=\"2\"/><text x=\"340\" y=\"205\" text-anchor=\"middle\" font-size=\"8\" fill=\"#f44336\">Done</text><defs><marker id=\"arr\" markerWidth=\"6\" markerHeight=\"6\" refX=\"5\" refY=\"3\" orient=\"auto\"><path d=\"M0,0 L6,3 L0,6 Z\" fill=\"#e65100\"/></marker></defs></svg><h2>The for Loop</h2><p>Use a for loop when you know how many times to repeat, or when iterating over a collection:</p><pre># Repeat 5 times\nfor i in range(5):\n    print(i)  # Prints 0, 1, 2, 3, 4\n\n# Process each item in a list\nfor name in [\"Alice\", \"Bob\", \"Charlie\"]:\n    print(\"Hello, \" + name)</pre><p>The loop variable (i, name) automatically takes each value in sequence.</p><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> When you scroll through Instagram, a for loop is displaying each post. When Spotify plays your playlist, a for loop is going through each song. Loops are everywhere!</div><h2>The while Loop</h2><p>Use a while loop when you don't know exactly how many iterations you need - when you want to continue until some condition changes:</p><pre>count = 0\nwhile count < 5:\n    print(count)\n    count = count + 1  # Don't forget this!</pre><p>Warning: If the condition never becomes False, you get an infinite loop!</p><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Real-World Application: Game Loop</strong><pre style=\"background:#263238;color:#aed581;padding:0.5em;border-radius:4px;font-family:monospace\">game_running = True\nwhile game_running:\n    get_player_input()\n    update_game_state()\n    draw_screen()\n    if player_quit:\n        game_running = False</pre>Every video game runs inside a while loop!</div><h2>When to Use Which</h2><ul><li><strong>for loop:</strong> Known number of iterations, iterating over collections</li><li><strong>while loop:</strong> Unknown iterations, waiting for conditions</li></ul><h2>Loop Control</h2><p>Two special statements control loop execution:</p><ul><li><strong>break:</strong> Exit the loop immediately</li><li><strong>continue:</strong> Skip to the next iteration</li></ul><pre>for i in range(10):\n    if i == 5:\n        break  # Stops at 5\n    print(i)  # Prints 0-4</pre><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Try It Yourself:</strong><pre style=\"background:#263238;color:#aed581;padding:0.5em;border-radius:4px;font-family:monospace\"># Count down from 5\nfor i in range(5, 0, -1):\n    print(i)\nprint(\"Blastoff!\")\n# Output: 5, 4, 3, 2, 1, Blastoff!</pre></div>",
              "exercise_questions": [
                {"type": "single_select", "id": "cs-loop-q1", "question": "A music player needs to play each song in a 50-song playlist. Instead of writing 50 separate 'play' commands, what should the developer use?", "correct_answer": "A loop that repeats the play command for each song", "all_answers": ["A loop that repeats the play command for each song", "50 different if statements", "A single variable", "A print statement"]},
                {"type": "single_select", "id": "cs-loop-q2", "question": "A chat application keeps checking for new messages until the user logs out. What causes this 'while checking' loop to stop?", "correct_answer": "When the logged_in condition becomes False", "all_answers": ["After checking exactly once", "When the logged_in condition becomes False", "It never stops (runs forever)", "After exactly 10 checks"]},
                {"type": "single_select", "id": "cs-loop-q3", "question": "A search function loops through items but should stop immediately when it finds what it's looking for. What command stops the loop early?", "correct_answer": "break - exits the loop immediately", "all_answers": ["break - exits the loop immediately", "continue - skips to next item", "restart - starts the loop over", "stop - this isn't a real command"]}
              ]
            },
            {
              "source_id": "cs-combining-structures",
              "title": "Combining Structures",
              "learning_objective_indices": [4, 5],
              "content": "<p>Real programs combine conditionals and loops to create sophisticated logic. A search algorithm loops through data while checking conditions. A game loop runs continuously, making decisions each frame.</p><h2>Conditionals Inside Loops</h2><p>One common pattern is checking conditions within a loop:</p><pre>numbers = [1, -2, 3, -4, 5]\n\nfor num in numbers:\n    if num > 0:\n        print(f\"{num} is positive\")\n    else:\n        print(f\"{num} is negative or zero\")</pre><p>Each iteration checks the condition independently.</p><h2>Loops Inside Conditionals</h2><p>The reverse is also useful - only looping when certain conditions are met:</p><pre>if user_wants_report:\n    for item in data:\n        process(item)\n        print_report()</pre><h2>Nested Loops</h2><p>Loops can contain other loops (be careful - this multiplies iterations!):</p><pre>for row in range(3):\n    for col in range(3):\n        print(f\"({row},{col})\", end=\" \")\n    print()  # New line after each row</pre><p>Output: (0,0) (0,1) (0,2), (1,0) (1,1) (1,2), (2,0) (2,1) (2,2)</p><h2>Tracing Execution</h2><p>When debugging complex nested structures, trace through the code step by step:</p><ol><li>Keep track of all variable values</li><li>Note which branches are taken</li><li>Follow loop iterations carefully</li><li>Watch for off-by-one errors</li></ol><p>This skill - mentally or on paper executing code - is invaluable for understanding and fixing programs.</p>",
              "exercise_questions": [
                {"type": "single_select", "id": "cs-combine-q1", "question": "A shopping cart loops through all items, but only adds a discount if the item is on sale. What programming pattern is this?", "correct_answer": "An if statement inside a loop - very common!", "all_answers": ["An if statement inside a loop - very common!", "This would cause an error", "This only works in certain languages", "You can only check one item per loop"]},
                {"type": "single_select", "id": "cs-combine-q2", "question": "A calendar app has code that displays a monthly grid: an outer loop for rows (weeks) containing an inner loop for columns (days). What is this called?", "correct_answer": "Nested code - structures inside other structures", "all_answers": ["Nested code - structures inside other structures", "Broken code with errors", "Code that's too short", "Code that won't execute"]},
                {"type": "single_select", "id": "cs-combine-q3", "question": "A developer finds a bug where a loop runs one too many times. What technique helps them understand exactly what's happening?", "correct_answer": "Tracing - following code step by step with variable values", "all_answers": ["Tracing - following code step by step with variable values", "Making the code run faster", "Adding more comments", "Tracing isn't useful for debugging"]}
              ]
            }
          ],
          "prepost_questions": [
            {"id": "cs-flow-pp-1a", "variant": "A", "lo_index": 0, "type": "single_select", "question": "What do conditionals allow programs to do?", "correct_answer": "Make decisions based on conditions", "all_answers": ["Make decisions based on conditions", "Repeat code", "Store data", "Print output"]},
            {"id": "cs-flow-pp-1b", "variant": "B", "lo_index": 0, "type": "single_select", "question": "What keyword starts a conditional in Python?", "correct_answer": "if", "all_answers": ["for", "while", "if", "def"]},
            {"id": "cs-flow-pp-2a", "variant": "A", "lo_index": 1, "type": "single_select", "question": "What runs when 'if x > 5' is True?", "correct_answer": "The code in the if block", "all_answers": ["The code in the if block", "The else block", "Both blocks", "Neither block"]},
            {"id": "cs-flow-pp-2b", "variant": "B", "lo_index": 1, "type": "single_select", "question": "What keyword provides an alternative path?", "correct_answer": "else", "all_answers": ["if", "else", "for", "while"]},
            {"id": "cs-flow-pp-3a", "variant": "A", "lo_index": 2, "type": "single_select", "question": "Why use loops?", "correct_answer": "To avoid writing repetitive code", "all_answers": ["To avoid writing repetitive code", "To make code slower", "To delete data", "Loops are not useful"]},
            {"id": "cs-flow-pp-3b", "variant": "B", "lo_index": 2, "type": "single_select", "question": "How many times can a loop execute?", "correct_answer": "As many times as needed", "all_answers": ["Exactly once", "Exactly twice", "As many times as needed", "Maximum 100"]},
            {"id": "cs-flow-pp-4a", "variant": "A", "lo_index": 3, "type": "single_select", "question": "Which loop is best for a known number of iterations?", "correct_answer": "for loop", "all_answers": ["for loop", "while loop", "if statement", "All are equal"]},
            {"id": "cs-flow-pp-4b", "variant": "B", "lo_index": 3, "type": "single_select", "question": "Which loop continues until a condition is false?", "correct_answer": "while loop", "all_answers": ["for loop", "while loop", "Both equally", "Neither"]},
            {"id": "cs-flow-pp-5a", "variant": "A", "lo_index": 4, "type": "single_select", "question": "Can conditionals be placed inside loops?", "correct_answer": "Yes", "all_answers": ["Yes", "No", "Only sometimes", "Only in certain languages"]},
            {"id": "cs-flow-pp-5b", "variant": "B", "lo_index": 4, "type": "single_select", "question": "Can loops be placed inside conditionals?", "correct_answer": "Yes", "all_answers": ["Yes", "No", "Only sometimes", "Only in certain languages"]},
            {"id": "cs-flow-pp-6a", "variant": "A", "lo_index": 5, "type": "single_select", "question": "What is tracing execution flow?", "correct_answer": "Following code logic step by step", "all_answers": ["Following code logic step by step", "Drawing diagrams", "Deleting code", "Writing documentation"]},
            {"id": "cs-flow-pp-6b", "variant": "B", "lo_index": 5, "type": "single_select", "question": "Why is understanding nested structures important?", "correct_answer": "To predict how the program will behave", "all_answers": ["To predict how the program will behave", "To make code look pretty", "It is not important", "To confuse others"]}
          ]
        },
        {
          "source_id": "cs-functions-modularity",
          "title": "Functions & Modularity",
          "description": "Learn to organize code into reusable pieces",
          "learning_objectives": [
            "Define what a function is in programming",
            "Explain the benefits of using functions",
            "Use parameters to pass data to functions",
            "Use return values to get data from functions",
            "Explain code modularity and reuse",
            "Organize code into logical functions"
          ],
          "lessons": [
            {
              "source_id": "cs-defining-functions",
              "title": "Defining Functions",
              "learning_objective_indices": [0, 1],
              "content": "<p>As programs grow larger, organization becomes crucial. Functions are the primary tool for organizing code into manageable, reusable pieces.</p><svg viewBox=\"0 0 400 250\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"250\" rx=\"8\"/><text x=\"200\" y=\"25\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"#333\">Function: Define Once, Use Many Times</text><rect x=\"20\" y=\"45\" width=\"160\" height=\"80\" fill=\"#e3f2fd\" stroke=\"#1565c0\" stroke-width=\"2\" rx=\"5\"/><text x=\"100\" y=\"65\" text-anchor=\"middle\" font-size=\"11\" font-weight=\"bold\" fill=\"#1565c0\">DEFINE</text><text x=\"100\" y=\"85\" text-anchor=\"middle\" font-size=\"9\" font-family=\"monospace\" fill=\"#333\">def greet():</text><text x=\"100\" y=\"100\" text-anchor=\"middle\" font-size=\"9\" font-family=\"monospace\" fill=\"#333\">  print(\"Hello!\")</text><text x=\"100\" y=\"115\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">(write once)</text><rect x=\"220\" y=\"45\" width=\"160\" height=\"80\" fill=\"#e8f5e9\" stroke=\"#2e7d32\" stroke-width=\"2\" rx=\"5\"/><text x=\"300\" y=\"65\" text-anchor=\"middle\" font-size=\"11\" font-weight=\"bold\" fill=\"#2e7d32\">CALL</text><text x=\"300\" y=\"85\" text-anchor=\"middle\" font-size=\"9\" font-family=\"monospace\" fill=\"#333\">greet()</text><text x=\"300\" y=\"100\" text-anchor=\"middle\" font-size=\"9\" font-family=\"monospace\" fill=\"#333\">greet()</text><text x=\"300\" y=\"115\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">(use many times!)</text><path d=\"M180,85 L220,85\" stroke=\"#ff9800\" stroke-width=\"3\" marker-end=\"url(#funcArr)\"/><defs><marker id=\"funcArr\" markerWidth=\"8\" markerHeight=\"8\" refX=\"6\" refY=\"4\" orient=\"auto\"><path d=\"M0,0 L8,4 L0,8 Z\" fill=\"#ff9800\"/></marker></defs><rect x=\"20\" y=\"140\" width=\"360\" height=\"95\" fill=\"#fff3e0\" stroke=\"#e65100\" rx=\"5\"/><text x=\"200\" y=\"160\" text-anchor=\"middle\" font-size=\"11\" font-weight=\"bold\" fill=\"#e65100\">Function Anatomy</text><text x=\"40\" y=\"180\" font-size=\"10\" font-family=\"monospace\" fill=\"#1565c0\">def</text><text x=\"65\" y=\"180\" font-size=\"10\" font-family=\"monospace\" fill=\"#2e7d32\">greet</text><text x=\"100\" y=\"180\" font-size=\"10\" font-family=\"monospace\" fill=\"#9c27b0\">()</text><text x=\"115\" y=\"180\" font-size=\"10\" font-family=\"monospace\" fill=\"#f44336\">:</text><text x=\"40\" y=\"200\" font-size=\"8\" fill=\"#1565c0\">↑keyword</text><text x=\"75\" y=\"200\" font-size=\"8\" fill=\"#2e7d32\">↑name</text><text x=\"100\" y=\"200\" font-size=\"8\" fill=\"#9c27b0\">↑params</text><text x=\"125\" y=\"200\" font-size=\"8\" fill=\"#f44336\">↑start</text><text x=\"200\" y=\"225\" font-size=\"9\" fill=\"#666\">Indented code below = function body</text></svg><h2>What is a Function?</h2><p>A function is a named block of code that performs a specific task. Once defined, you can run that code by calling the function by name, as many times as needed.</p><pre>def greet():\n    print(\"Hello!\")\n    print(\"Welcome to the program.\")\n\n# Call the function\ngreet()  # Prints both lines\ngreet()  # Prints them again</pre><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> The average smartphone app contains thousands of functions! Instagram's app has functions for loading images, applying filters, posting comments, sending DMs, and much more. Without functions, the code would be millions of lines of unmaintainable chaos.</div><h2>Why Use Functions?</h2><p>Functions provide several critical benefits:</p><ul><li><strong>Reusability:</strong> Write code once, use it many times</li><li><strong>Organization:</strong> Break complex problems into smaller, manageable parts</li><li><strong>Readability:</strong> Well-named functions make code self-documenting</li><li><strong>Maintainability:</strong> Fix bugs or make improvements in one place</li><li><strong>Testing:</strong> Test individual functions independently</li></ul><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Real-World Application: Password Validation</strong><pre style=\"background:#263238;color:#aed581;padding:0.5em;border-radius:4px;font-family:monospace\">def is_password_strong(password):\n    has_upper = any(c.isupper() for c in password)\n    has_number = any(c.isdigit() for c in password)\n    long_enough = len(password) >= 8\n    return has_upper and has_number and long_enough\n\n# Reuse everywhere passwords are needed!\nif is_password_strong(new_password):\n    save_password()</pre></div><h2>Function Anatomy</h2><p>A function definition includes:</p><ol><li><strong>def keyword:</strong> Tells Python you're defining a function</li><li><strong>Name:</strong> How you'll call the function later</li><li><strong>Parentheses:</strong> For parameters (covered next lesson)</li><li><strong>Colon:</strong> Indicates the start of the function body</li><li><strong>Indented body:</strong> The code that runs when you call the function</li></ol><h2>Calling Functions</h2><p>To run a function's code, call it by name with parentheses:</p><pre>greet()     # Correct - calls the function\ngreet       # Wrong - just references the function object</pre><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Try It Yourself:</strong><pre style=\"background:#263238;color:#aed581;padding:0.5em;border-radius:4px;font-family:monospace\"># Define a simple function\ndef celebrate():\n    print(\"🎉 Congratulations!\")\n    print(\"You learned functions!\")\n\n# Call it three times\ncelebrate()\ncelebrate()\ncelebrate()</pre></div>",
              "exercise_questions": [
                {"type": "single_select", "id": "cs-func-q1", "question": "Maya notices she's writing the same 5 lines of code to display a welcome message in 8 different places in her program. What programming concept should Maya use to avoid this repetition?", "correct_answer": "Create a function with those 5 lines and call it where needed", "all_answers": ["Create a function with those 5 lines and call it where needed", "Copy-paste is fine since it works", "Create 8 different variables", "Delete most of the welcome messages"]},
                {"type": "multiple_select", "id": "cs-func-q2", "question": "Alex created a function calculate_shipping() that is used in 15 places throughout their e-commerce application. Which scenarios demonstrate the benefits of this approach?", "correct_answers": ["When shipping rates change, Alex only edits one function", "Alex can test shipping calculations independently", "Team members can understand the code more easily"], "all_answers": ["When shipping rates change, Alex only edits one function", "Alex can test shipping calculations independently", "Team members can understand the code more easily", "The program runs twice as slow"]},
                {"type": "single_select", "id": "cs-func-q3", "question": "Jordan writes: 'function greet(): print(\"Hello\")' but Python gives an error. Looking at the function anatomy diagram, what did Jordan do wrong?", "correct_answer": "Used 'function' instead of 'def' keyword", "all_answers": ["Used 'function' instead of 'def' keyword", "Forgot the print statement", "The parentheses are wrong", "The message is incorrect"]}
              ]
            },
            {
              "source_id": "cs-parameters-returns",
              "title": "Parameters & Return Values",
              "learning_objective_indices": [2, 3],
              "content": "<p>Functions become truly powerful when they can receive input and produce output. Parameters let you pass data in; return values let you get data out.</p><svg viewBox=\"0 0 400 200\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"200\" rx=\"8\"/><text x=\"200\" y=\"20\" text-anchor=\"middle\" font-size=\"13\" font-weight=\"bold\" fill=\"#333\">Function: Input → Process → Output</text><rect x=\"30\" y=\"70\" width=\"80\" height=\"60\" fill=\"#e3f2fd\" stroke=\"#1565c0\" stroke-width=\"2\" rx=\"5\"/><text x=\"70\" y=\"95\" text-anchor=\"middle\" font-size=\"10\" font-weight=\"bold\" fill=\"#1565c0\">INPUT</text><text x=\"70\" y=\"110\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">Parameters</text><text x=\"70\" y=\"122\" text-anchor=\"middle\" font-size=\"8\" font-family=\"monospace\" fill=\"#333\">(a, b)</text><rect x=\"160\" y=\"70\" width=\"80\" height=\"60\" fill=\"#fff3e0\" stroke=\"#e65100\" stroke-width=\"2\" rx=\"5\"/><text x=\"200\" y=\"95\" text-anchor=\"middle\" font-size=\"10\" font-weight=\"bold\" fill=\"#e65100\">PROCESS</text><text x=\"200\" y=\"110\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">Function body</text><text x=\"200\" y=\"122\" text-anchor=\"middle\" font-size=\"8\" font-family=\"monospace\" fill=\"#333\">result = a + b</text><rect x=\"290\" y=\"70\" width=\"80\" height=\"60\" fill=\"#e8f5e9\" stroke=\"#2e7d32\" stroke-width=\"2\" rx=\"5\"/><text x=\"330\" y=\"95\" text-anchor=\"middle\" font-size=\"10\" font-weight=\"bold\" fill=\"#2e7d32\">OUTPUT</text><text x=\"330\" y=\"110\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">Return value</text><text x=\"330\" y=\"122\" text-anchor=\"middle\" font-size=\"8\" font-family=\"monospace\" fill=\"#333\">return result</text><path d=\"M110,100 L160,100\" stroke=\"#ff9800\" stroke-width=\"2\" marker-end=\"url(#paramArr)\"/><path d=\"M240,100 L290,100\" stroke=\"#ff9800\" stroke-width=\"2\" marker-end=\"url(#paramArr)\"/><defs><marker id=\"paramArr\" markerWidth=\"8\" markerHeight=\"8\" refX=\"6\" refY=\"4\" orient=\"auto\"><path d=\"M0,0 L8,4 L0,8 Z\" fill=\"#ff9800\"/></marker></defs><text x=\"200\" y=\"165\" text-anchor=\"middle\" font-size=\"9\" font-family=\"monospace\" fill=\"#333\">total = add(5, 3)  →  total is 8</text><text x=\"200\" y=\"185\" text-anchor=\"middle\" font-size=\"8\" fill=\"#666\">5 and 3 go in, 8 comes out!</text></svg><h2>Parameters: Input for Functions</h2><p>Parameters are variables that receive values when a function is called:</p><pre>def greet(name):\n    print(\"Hello, \" + name + \"!\")\n\ngreet(\"Alice\")  # Prints: Hello, Alice!\ngreet(\"Bob\")    # Prints: Hello, Bob!</pre><p>The parameter <code>name</code> takes whatever value is passed in.</p><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> Google's search function takes your query as a parameter and searches billions of web pages! The same function handles \"best pizza near me\" and \"quantum physics\" - the parameter just changes what it searches for.</div><h2>Multiple Parameters</h2><p>Functions can have multiple parameters, separated by commas:</p><svg viewBox=\"0 0 400 120\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"120\" rx=\"8\"/><text x=\"200\" y=\"20\" text-anchor=\"middle\" font-size=\"12\" font-weight=\"bold\" fill=\"#333\">Multiple Parameters</text><text x=\"50\" y=\"55\" font-size=\"10\" font-family=\"monospace\" fill=\"#1565c0\">def</text><text x=\"75\" y=\"55\" font-size=\"10\" font-family=\"monospace\" fill=\"#2e7d32\">calculate_area</text><text x=\"155\" y=\"55\" font-size=\"10\" font-family=\"monospace\" fill=\"#9c27b0\">(width, height)</text><text x=\"255\" y=\"55\" font-size=\"10\" font-family=\"monospace\" fill=\"#333\">:</text><rect x=\"155\" y=\"42\" width=\"35\" height=\"18\" fill=\"none\" stroke=\"#e91e63\" stroke-width=\"1.5\" stroke-dasharray=\"3\" rx=\"3\"/><rect x=\"195\" y=\"42\" width=\"35\" height=\"18\" fill=\"none\" stroke=\"#3f51b5\" stroke-width=\"1.5\" stroke-dasharray=\"3\" rx=\"3\"/><text x=\"172\" y=\"75\" text-anchor=\"middle\" font-size=\"8\" fill=\"#e91e63\">1st param</text><text x=\"212\" y=\"75\" text-anchor=\"middle\" font-size=\"8\" fill=\"#3f51b5\">2nd param</text><text x=\"50\" y=\"100\" font-size=\"10\" font-family=\"monospace\" fill=\"#333\">calculate_area(</text><text x=\"145\" y=\"100\" font-size=\"10\" font-family=\"monospace\" fill=\"#e91e63\">10</text><text x=\"158\" y=\"100\" font-size=\"10\" font-family=\"monospace\" fill=\"#333\">,</text><text x=\"175\" y=\"100\" font-size=\"10\" font-family=\"monospace\" fill=\"#3f51b5\">5</text><text x=\"185\" y=\"100\" font-size=\"10\" font-family=\"monospace\" fill=\"#333\">)  # width=10, height=5</text></svg><pre>def add(a, b):\n    result = a + b\n    print(result)\n\nadd(3, 5)   # Prints: 8\nadd(10, 20) # Prints: 30</pre><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Real-World Application: Ride-Sharing App</strong><pre style=\"background:#263238;color:#aed581;padding:0.5em;border-radius:4px;font-family:monospace\">def calculate_fare(distance_miles, surge_multiplier):\n    base_fare = 2.50\n    per_mile = 1.75\n    fare = base_fare + (distance_miles * per_mile)\n    return fare * surge_multiplier\n\n# Normal ride: 5 miles, no surge\nprint(calculate_fare(5, 1.0))   # $11.25\n\n# Busy hour: 5 miles, 2x surge\nprint(calculate_fare(5, 2.0))   # $22.50</pre></div><h2>Return Values: Output from Functions</h2><p>The <code>return</code> statement sends a value back to the caller:</p><pre>def add(a, b):\n    return a + b\n\nsum = add(3, 5)  # sum is now 8\nprint(sum)       # Prints: 8\n\n# Can use return value directly\nprint(add(10, 20))  # Prints: 30</pre><h2>Return Ends the Function</h2><p>When <code>return</code> executes, the function stops immediately:</p><pre>def check_positive(num):\n    if num > 0:\n        return \"Positive\"\n    return \"Not positive\"  # Only runs if num <= 0</pre><h2>Functions Without return</h2><p>If a function doesn't explicitly return something, it returns <code>None</code>:</p><pre>def say_hi():\n    print(\"Hi\")\n\nresult = say_hi()  # result is None</pre><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Try It Yourself:</strong><pre style=\"background:#263238;color:#aed581;padding:0.5em;border-radius:4px;font-family:monospace\"># Function with parameter and return\ndef double(number):\n    return number * 2\n\n# Chain the results!\nresult = double(double(double(2)))\nprint(result)  # What do you get?</pre><p style=\"margin:0.5em 0 0 0;font-size:0.9em\">Answer: 2 → 4 → 8 → 16</p></div>",
              "exercise_questions": [
                {"type": "single_select", "id": "cs-param-q1", "question": "Taylor writes a function to greet users: 'def greet(name): print(\"Hello, \" + name)'. When Taylor calls greet(\"Sam\"), what happens to the value \"Sam\"?", "correct_answer": "It's passed as the 'name' parameter and used inside the function", "all_answers": ["It's passed as the 'name' parameter and used inside the function", "It's printed before the function runs", "It replaces the function name", "It creates a new function called 'Sam'"]},
                {"type": "single_select", "id": "cs-param-q2", "question": "A ride-sharing app needs a function that calculates the fare based on distance and time. The app needs to display this fare on screen. Should the function use 'print' or 'return' for the calculated amount?", "correct_answer": "Return, so the app can use the value to display it however needed", "all_answers": ["Return, so the app can use the value to display it however needed", "Print, because that's how you output data", "Both print and return together", "Neither - just save it to a file"]},
                {"type": "single_select", "id": "cs-param-q3", "question": "Casey creates: 'def calculate_area(width, height): return width * height'. What will 'area = calculate_area(4, 5)' store in the variable 'area'?", "correct_answer": "20", "all_answers": ["20", "None", "The function itself", "An error because you can't store return values"]}
              ]
            },
            {
              "source_id": "cs-code-organization",
              "title": "Code Organization",
              "learning_objective_indices": [4, 5],
              "content": "<p>Functions are tools for creating modular, organized code. Good organization makes programs easier to understand, modify, and debug.</p><svg viewBox=\"0 0 400 220\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"220\" rx=\"8\"/><text x=\"200\" y=\"20\" text-anchor=\"middle\" font-size=\"13\" font-weight=\"bold\" fill=\"#333\">Single Responsibility Principle</text><rect x=\"20\" y=\"40\" width=\"170\" height=\"75\" fill=\"#ffebee\" stroke=\"#c62828\" stroke-width=\"2\" rx=\"5\"/><text x=\"105\" y=\"58\" text-anchor=\"middle\" font-size=\"10\" font-weight=\"bold\" fill=\"#c62828\">BAD: Does Too Much</text><text x=\"105\" y=\"75\" text-anchor=\"middle\" font-size=\"7\" font-family=\"monospace\" fill=\"#333\">process_order_and_send_</text><text x=\"105\" y=\"87\" text-anchor=\"middle\" font-size=\"7\" font-family=\"monospace\" fill=\"#333\">email_and_update_db()</text><text x=\"105\" y=\"105\" text-anchor=\"middle\" font-size=\"8\" fill=\"#c62828\">Hard to test, reuse, debug</text><rect x=\"210\" y=\"40\" width=\"170\" height=\"75\" fill=\"#e8f5e9\" stroke=\"#2e7d32\" stroke-width=\"2\" rx=\"5\"/><text x=\"295\" y=\"58\" text-anchor=\"middle\" font-size=\"10\" font-weight=\"bold\" fill=\"#2e7d32\">GOOD: One Job Each</text><text x=\"295\" y=\"75\" text-anchor=\"middle\" font-size=\"8\" font-family=\"monospace\" fill=\"#333\">process_order()</text><text x=\"295\" y=\"87\" text-anchor=\"middle\" font-size=\"8\" font-family=\"monospace\" fill=\"#333\">send_email()</text><text x=\"295\" y=\"99\" text-anchor=\"middle\" font-size=\"8\" font-family=\"monospace\" fill=\"#333\">update_database()</text><rect x=\"20\" y=\"130\" width=\"360\" height=\"75\" fill=\"#e3f2fd\" stroke=\"#1565c0\" rx=\"5\"/><text x=\"200\" y=\"150\" text-anchor=\"middle\" font-size=\"11\" font-weight=\"bold\" fill=\"#1565c0\">Breaking Down a Complex Task</text><rect x=\"35\" y=\"160\" width=\"60\" height=\"30\" fill=\"#fff\" stroke=\"#1565c0\" rx=\"3\"/><text x=\"65\" y=\"178\" text-anchor=\"middle\" font-size=\"7\" fill=\"#333\">validate()</text><path d=\"M95,175 L115,175\" stroke=\"#ff9800\" stroke-width=\"2\" marker-end=\"url(#orgArr)\"/><rect x=\"115\" y=\"160\" width=\"60\" height=\"30\" fill=\"#fff\" stroke=\"#1565c0\" rx=\"3\"/><text x=\"145\" y=\"178\" text-anchor=\"middle\" font-size=\"7\" fill=\"#333\">calculate()</text><path d=\"M175,175 L195,175\" stroke=\"#ff9800\" stroke-width=\"2\" marker-end=\"url(#orgArr)\"/><rect x=\"195\" y=\"160\" width=\"60\" height=\"30\" fill=\"#fff\" stroke=\"#1565c0\" rx=\"3\"/><text x=\"225\" y=\"178\" text-anchor=\"middle\" font-size=\"7\" fill=\"#333\">process()</text><path d=\"M255,175 L275,175\" stroke=\"#ff9800\" stroke-width=\"2\" marker-end=\"url(#orgArr)\"/><rect x=\"275\" y=\"160\" width=\"60\" height=\"30\" fill=\"#fff\" stroke=\"#1565c0\" rx=\"3\"/><text x=\"305\" y=\"178\" text-anchor=\"middle\" font-size=\"7\" fill=\"#333\">confirm()</text><defs><marker id=\"orgArr\" markerWidth=\"8\" markerHeight=\"8\" refX=\"6\" refY=\"4\" orient=\"auto\"><path d=\"M0,0 L8,4 L0,8 Z\" fill=\"#ff9800\"/></marker></defs></svg><h2>The Single Responsibility Principle</h2><p>Each function should do one thing and do it well:</p><ul><li><strong>Good:</strong> <code>calculate_tax(amount)</code>, <code>format_currency(value)</code></li><li><strong>Bad:</strong> <code>calculate_tax_and_print_receipt_and_update_database()</code></li></ul><p>If you struggle to name a function or find yourself using \"and\" in the name, it probably does too much.</p><div style=\"background:#e8f5e9;border-left:4px solid #4caf50;padding:1em;margin:1em 0\"><strong>Did You Know?</strong> The UNIX operating system was built on this philosophy: each program does one thing well. The 'ls' command just lists files. The 'cat' command just reads files. The 'grep' command just searches text. By combining these simple tools, you can do incredibly complex things!</div><h2>Choosing Good Names</h2><p>Function names should clearly describe what they do:</p><svg viewBox=\"0 0 400 100\" style=\"max-width:400px;display:block;margin:1em auto\"><rect fill=\"#f8f9fa\" width=\"400\" height=\"100\" rx=\"8\"/><text x=\"200\" y=\"20\" text-anchor=\"middle\" font-size=\"12\" font-weight=\"bold\" fill=\"#333\">Naming: Be Specific!</text><rect x=\"20\" y=\"35\" width=\"170\" height=\"50\" fill=\"#ffebee\" stroke=\"#c62828\" rx=\"5\"/><text x=\"105\" y=\"55\" text-anchor=\"middle\" font-size=\"9\" fill=\"#c62828\">Vague Names</text><text x=\"105\" y=\"72\" text-anchor=\"middle\" font-size=\"9\" font-family=\"monospace\" fill=\"#333\">do_stuff(), handle(), process()</text><rect x=\"210\" y=\"35\" width=\"170\" height=\"50\" fill=\"#e8f5e9\" stroke=\"#2e7d32\" rx=\"5\"/><text x=\"295\" y=\"55\" text-anchor=\"middle\" font-size=\"9\" fill=\"#2e7d32\">Descriptive Names</text><text x=\"295\" y=\"72\" text-anchor=\"middle\" font-size=\"9\" font-family=\"monospace\" fill=\"#333\">validate_email(), calculate_tax()</text></svg><ul><li>Use verbs: <code>calculate</code>, <code>get</code>, <code>validate</code>, <code>process</code></li><li>Be specific: <code>get_user_age()</code> not <code>get_data()</code></li><li>Follow conventions: lowercase_with_underscores in Python</li></ul><div style=\"background:#fff3e0;border-left:4px solid #ff9800;padding:1em;margin:1em 0\"><strong>Real-World Application: Restaurant Kitchen</strong><p style=\"margin:0.5em 0\">A well-organized kitchen has stations: one chef grills, one makes sauces, one plates. Each person has one responsibility. Code works the same way!</p><pre style=\"background:#263238;color:#aed581;padding:0.5em;border-radius:4px;font-family:monospace\"># Restaurant order processing\ndef process_order(order):\n    validate_order(order)      # Check order is valid\n    prepare_ingredients(order) # Get items ready\n    cook_order(order)          # Make the food\n    plate_order(order)         # Arrange presentation\n    notify_waiter(order)       # Ready to serve!</pre></div><h2>Breaking Down Complex Tasks</h2><p>Large tasks should be decomposed into smaller functions:</p><pre># Instead of one huge function:\ndef process_order(order):\n    # 200 lines of code...\n\n# Break it into manageable pieces:\ndef process_order(order):\n    validate_order(order)\n    calculate_total(order)\n    apply_discounts(order)\n    process_payment(order)\n    send_confirmation(order)</pre><h2>Code Reuse</h2><p>Once you have well-designed functions, reuse them:</p><pre>def format_name(first, last):\n    return f\"{first} {last}\"\n\n# Reuse in multiple contexts\nprint(format_name(\"Alice\", \"Smith\"))\nemail_header = format_name(customer.first, customer.last)\nreport_line = format_name(employee.first, employee.last)</pre><p>If you find yourself copying code, consider making it a function instead.</p><div style=\"background:#e3f2fd;border-left:4px solid #2196f3;padding:1em;margin:1em 0\"><strong>Try It Yourself:</strong><pre style=\"background:#263238;color:#aed581;padding:0.5em;border-radius:4px;font-family:monospace\"># Refactor this into smaller functions!\ndef bad_greeting(name, age, city):\n    print(\"Hello \" + name)\n    if age >= 18:\n        print(\"You are an adult\")\n    else:\n        print(\"You are a minor\")\n    print(\"You live in \" + city)\n\n# Better: greet(), describe_age_group(), mention_location()</pre></div>",
              "exercise_questions": [
                {"type": "single_select", "id": "cs-org-q1", "question": "Jamie is reviewing code and finds a function named 'do_everything_for_checkout()' that handles cart validation, payment processing, inventory updates, and email confirmation (250 lines total). What advice should Jamie give?", "correct_answer": "Split it into separate functions, each handling one responsibility", "all_answers": ["Split it into separate functions, each handling one responsibility", "It's fine since it all relates to checkout", "Add more comments to explain the 250 lines", "Rename it to 'checkout_master_function()'"]},
                {"type": "multiple_select", "id": "cs-org-q2", "question": "A team lead asks Riley to improve the codebase's organization. Which of Riley's changes follow best practices?", "correct_answers": ["Renaming 'process()' to 'validate_user_email()'", "Breaking a 150-line function into 5 smaller functions"], "all_answers": ["Renaming 'process()' to 'validate_user_email()'", "Breaking a 150-line function into 5 smaller functions", "Combining 3 small functions into one large function", "Naming all functions 'helper1()', 'helper2()', 'helper3()'"]},
                {"type": "single_select", "id": "cs-org-q3", "question": "Sam notices the same 10 lines of code for formatting dates appears in 6 different files. What should Sam do to improve the codebase?", "correct_answer": "Create a format_date() function and call it from all 6 locations", "all_answers": ["Create a format_date() function and call it from all 6 locations", "Leave it because it already works", "Add a comment saying 'duplicated code' in each file", "Delete the date formatting since it's repetitive"]}
              ]
            }
          ],
          "prepost_questions": [
            {"id": "cs-func-pp-1a", "variant": "A", "lo_index": 0, "type": "single_select", "question": "What keyword defines a function in Python?", "correct_answer": "def", "all_answers": ["def", "function", "fun", "define"]},
            {"id": "cs-func-pp-1b", "variant": "B", "lo_index": 0, "type": "single_select", "question": "What is calling a function?", "correct_answer": "Running/executing the function's code", "all_answers": ["Running/executing the function's code", "Defining the function", "Deleting the function", "Naming the function"]},
            {"id": "cs-func-pp-2a", "variant": "A", "lo_index": 1, "type": "single_select", "question": "Why use functions instead of repeating code?", "correct_answer": "Easier maintenance and fewer bugs", "all_answers": ["Easier maintenance and fewer bugs", "Makes code longer", "Makes programs slower", "No real benefit"]},
            {"id": "cs-func-pp-2b", "variant": "B", "lo_index": 1, "type": "single_select", "question": "What happens when you fix repeated code?", "correct_answer": "Must fix it in every location", "all_answers": ["Must fix it in every location", "Automatically fixes everywhere", "Cannot fix it", "It fixes itself"]},
            {"id": "cs-func-pp-3a", "variant": "A", "lo_index": 2, "type": "single_select", "question": "In 'def greet(name)', what is 'name'?", "correct_answer": "A parameter", "all_answers": ["A parameter", "A return value", "The function name", "A keyword"]},
            {"id": "cs-func-pp-3b", "variant": "B", "lo_index": 2, "type": "single_select", "question": "Can functions have multiple parameters?", "correct_answer": "Yes", "all_answers": ["Yes", "No", "Only two", "Only in Python"]},
            {"id": "cs-func-pp-4a", "variant": "A", "lo_index": 3, "type": "single_select", "question": "What does 'return 42' do?", "correct_answer": "Sends 42 back to the caller", "all_answers": ["Sends 42 back to the caller", "Prints 42", "Creates variable 42", "Does nothing"]},
            {"id": "cs-func-pp-4b", "variant": "B", "lo_index": 3, "type": "single_select", "question": "What happens after a return statement?", "correct_answer": "The function stops executing", "all_answers": ["The function stops executing", "The function continues", "The whole program ends", "Nothing special"]},
            {"id": "cs-func-pp-5a", "variant": "A", "lo_index": 4, "type": "single_select", "question": "What is modularity?", "correct_answer": "Breaking code into independent pieces", "all_answers": ["Breaking code into independent pieces", "Making code longer", "Adding more bugs", "Writing without functions"]},
            {"id": "cs-func-pp-5b", "variant": "B", "lo_index": 4, "type": "single_select", "question": "Why is code reuse valuable?", "correct_answer": "Saves time and reduces errors", "all_answers": ["Saves time and reduces errors", "Makes code longer", "Adds complexity", "No value"]},
            {"id": "cs-func-pp-6a", "variant": "A", "lo_index": 5, "type": "single_select", "question": "Should function names describe what they do?", "correct_answer": "Yes, always", "all_answers": ["Yes, always", "No", "Only sometimes", "Names don't matter"]},
            {"id": "cs-func-pp-6b", "variant": "B", "lo_index": 5, "type": "single_select", "question": "What should you do with a complex task?", "correct_answer": "Break it into smaller functions", "all_answers": ["Break it into smaller functions", "Write one huge function", "Avoid coding it", "Give up"]}
          ]
        }
      ]
    }
  ]
}
